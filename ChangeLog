Tue Jan 21 02:08:05 2003  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/XGFont.m ([XGFontInfo -dealloc]): Fixed memory leak:
	use XFreeFont(), not XUnloadFont().

2003-01-14  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check for GLX_RGBA_TYPE in glx.h

2003-01-14  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xdps/NSDPSContext.m
	Removed unneeded method [xrContext]. Moved context access into
	[createDPSContext] and call [XGServer xrContextForScreen:] instead
	of [XGServer xrContext].

2002-12-31  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGOpenGL.h: Redefine BOOL to avoid name collision

2002-11-27  Frederic De Jaeger <dejaeger@free.fr>

	* configure.ac: add the flag --disable-glx.
	* configure: regenerated

2002-11-24  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XIMInputServer.m
	In [lookupStringForEvent:window:keysym:] autorelease the string,
	so it gets freed late on.
	
2002-11-21  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.3

	* Source/gsc/GSStreamContext.m (-GSSendBezierPath:): Add back and 
	implement.

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	minor correction.

2002-11-21  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	Implemented [GSSendBezierPath:].
	* Source/gsc/GSStreamContext.m
	Removed (empty) implementation of [GSSendBezierPath:].
	* Source/x11/XGServer.m
	Added #ifdef around include of XGOpenGL.h.

2002-11-16  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGGLContext.m (-initWithFormat:shareContext:): Remove
	assert.

	* Source/x11/XGServerWindow.m ([XGServer -setinputstate::]): Return
	if window is NULL.

2002-11-16  Gregory John Casamento <greg_casamento@yahoo.com>

	* Headers/x11/XGOpenGL.h: Added define to avoid collision of
	parameters named "id" in some versions of the OpenGL headers
	with the Objective-C type "id".   This was causing build of
	back to fail.

2002-11-15  Frederic De Jaeger <dejaeger@free.fr>

	* Source/x11/XGGLFormat.m, Source/x11/XGGLContext.m
	  Headers/x11/XGOpenGL.h: New files.
	* Source/x11/Makefile: Updated.
	* configure.ac: add a test for GLX
	* Source/x11/XGServer.m (glContextClass,
          glPixelFormatClass): Implement.

2002-11-08  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	Reassert focus and/or send FocusIn event in all cases.

2002-10-29  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -_checkWindowManager]):
	Make sure not to dereference possible NULL pointer.

2002-10-28  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (-DPSsetalpha:): Use GSsetalpha
	as defined in frontend, for printers that don't support setalpha.

2002-10-27  Adam Fedor  <fedor@gnu.org>

	* Tools/font_cacher.m: Add @end (Reported by Caba Conti
	<520040438669-0001@t-online.de>).

2002-10-21  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XIMInputServer.m
	([XIMInputServer -initWithDelegate:display:name:]): Use
	GSEncodingFromLocale.
	* Source/xlib/XGFont.m ([XGFontInfo -setupAttributes]): Idem.
	* Source/xlib/XftFontInfo.m ([XftFontInfo -setupAttributes]): Idem.

2002-10-19  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	Don't set desiredFocusWindow to 0.
	([XGServer
	-receivedEvent:type:extra:forMode:] (FocusOut): Hack: if focus
	went nowhere, don't deactivate app.

2002-10-18  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	Only send event if we don't have a key window.

2002-10-15 01:37  Alexander Malmberg  <alexander@malmberg.org>

	* Tools/GNUmakefile: Use BUILD_SERVER to decide whether to build
	X specific parts of gpbs or not.

2002-10-13  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.2.
	* Documentation/news.texi: Update.

Fri Oct 11 00:47:04 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/xlib/XGFont.m ([XGFontInfo -setupAttributes]): Return NO
	if the font can't be loaded.  (Patch by Georg Fleischmann
	<georg@vhf.de>).

2002-10-10  Adam Fedor  <fedor@gnu.org>

	* GNUmakefile.postamble: Only install back.make if building
	as a library.

2002-10-10  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGGState.m
	DPSsetdash::: now accepts an empty dash pattern, signaling a reset
	to a solid line.

2002-10-08  Adam Fedor  <fedor@gnu.org>

	* Update for front-end passing colorspaces and fonts
	in overridable way.
	* Headers/gsc/GSGStateOps.h: Update changed methods.
	* Source/art/ARTContext.m: Font ivar is now a GSFontInfo
	class, so use 'font' instead of '[font fontInfo]'.
	* Source/gsc/GSContext.m (-GSSetFont): Idem.
	(-GSSetFillColorspace:): Implement.
	(-GSSetStrokeColorspace:): Idem.
	(-GSSetFillColor:): Idem.
	(-GSSetStrokeColor:): Idem.
	* Source/gsc/GSGState.m: Update font ivar handling.
	* Source/gsc/GSStreamContext.m: Idem.
	* Source/winlib/WIN32GState.m: Idem.
	* Source/xlib/XGGState.m: Idem.

	* Window focus fixes
	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:](ClientMessage/TAKE_FOCUS)):
	Use given window as focus window, not one under mouse.
	* Source/x11/XGServerWindow.m ([XGServer -setinputfocus:]): Don't
	reset focus if we already requested it on this window.
	
2002-09-28 22:04  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Add .font package handling again.

2002-09-28 17:30  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m (load_font_configuration): Handle the
	'Family' key.

2002-09-26 16:08  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Implement handling of the 'ScreenFonts' key
	in .nfont packages.

2002-09-25 22:39  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Rework font configuration code to handle
	the updated (and rather different) .nfont package format.

2002-09-24 14:38  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Use GSFontAntiAlias defaults value to decide
	whether	antialiasing should be enabled in the default rendering
	hints.

2002-09-24 13:22  Alexander Malmberg  <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m (+windowBufferForWindow:depthInfo:):
	Detect and handle errors properly. Only use shared memory for
	reasonably large windows.

	(-needsAlpha): Make data isn't NULL before trying to do anything.

2002-09-23 19:30  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m (-initWithFontName:matrix:): Retain
	familyName correctly.

2002-09-21 12:14  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/x11/XWindowBuffer.h, Source/x11/XWindowBuffer.m
	(+windowBufferForWindow:depthInfo:): If possible, create a shared
	pixmap from the image data and set it as the background of the
	window.

2002-09-20 18:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (clip_svp_callback): Use correct x coordinate
	for final span.

	(-_clip_add_svp:): Place the last entry at the correct place
	in clip_index.

2002-09-20 18:05  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (clip_svp_callback, -_clip_add_svp:): Update
	the clipping bounding box.

2002-09-19  Adam Fedor  <fedor@gnu.org>

	* Source/win32/WIN32Server.m ([WIN -setbackgroundcolor::]): New.
	* Source/x11/XGServerWindow.m ([XGServer -_createBuffer:]): Remove
	setting background pixmap.
	([XGServer -setbackgroundcolor::]): New

	* Source/xlib/XGGState.m
	(-_compositeGState:sourcefromRect:fromRecttoPoint:toPointop:opfraction):
	Convert destination point not rect.
	(-DPSimage:matrix:pixelsWide:pixelsHigh:bitsPerSample:samplesPerPixel:bitsPerPixel:bytesPerRow:isPlanar:hasAlpha:colorSpaceName:data):
	Remove flipping.	

2002-09-19 00:33  Alexander Malmberg  <alexander@malmberg.org>

	* Header/x11/XGInputServer.h, Source/x11/XIMInputServer.m: Track
	all created XIC:s and destroy them explicitly.

2002-09-18 19:59  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.h, Source/art/blit.m, Source/art/composite.m:
	Implement -dissolveGState:fromRect:toPoint:delta:.

2002-09-18 00:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m (-DPSimage:::::::::::): Treat input as
	pre-multiplied in the common case to (really) match xlib/.

2002-09-16 16:43  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m (add_face): Change default rendering hints.

2002-09-16 16:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTGState.h, Source/art/ARTContext.m,
	Source/art/image.m, Source/art/composite.m, Source/art/path.m:
	Handle NSBackingStoreNonretained.

2002-09-14 13:39  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Keep track of the family name in FTFaceInfo
	so FTFontInfo can set it correctly.

2002-09-14 13:03  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Add support for some simple rendering hints
	in .nfont packages.

2002-09-12 02:29  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m (_image_get_color_rgb_8,
	_image_get_color_rgb_cmyk_gray): Fix clamping of y.

2002-09-10 22:11  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/x11/XWindowBuffer.h: Add more documentation.

2002-09-10 21:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTWindowBuffer.h, Source/art/ARTWindowBuffer.m,
	Source/x11/XWindowBuffer.m, Headers/x11/XWindowBuffer.h: Rename
	ARTWindowBuffer to XWindowBuffer and move it to x11/ so other
	backends can use it. Update many files in Source/art/.

2002-09-10 17:35  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/composite.m: Implement handling of tranformations and
	clipping.

2002-09-08  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer
	-_XWinFrameToOSWinFrame:for:]): New.
	([XGServer -_addExposedRectangle::]): Convert rect to OS coords.
	([XGServer -_processExposedRectangles:]): Invalidate exposed
	rects in view. (patch from Frederic De Jaeger).

2002-09-06  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSContext.m (-initWithContextInfo:): Fix
	for GSStreamContext subclass.
	* Source/GSStreamGState.m: New file.
	* Source/GSStreamContext.m: Make a subclass of GSContext.
	Call superclass implementation where appropriate.

	* Source/GSStreamContext.m: Fix for 'show'ing parenthesis
	characters (patch from Stefan Urbanek).
	
2002-09-01  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.1

2002-09-01 12:58  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m ([ARTGState -GSCurrentDevice:::]): Check
	for NULL pointers before setting values.

2002-08-31 19:54  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (DPSrectfill::::): Calculate alpha pointer
	correctly when clipped.

	* Source/art/composite.m (-compositeGState:fromRect:toPoint:op:):
	Fix detection of horizontal-only overlap (order==2), and handling
	it in the general case.

	* Source/blit.m: Whitespace cleanups.

2002-08-31 15:52  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m: Implement clipping of images using the
	clipping spans.

2002-08-31 14:40  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/ARTGState.h, Source/art/path.m:
	Store clipping path as a set of spans instead of as an svp. Build
	spans from DPSclip and DPSeoclip, and use it when clipping (only
	implemented for paths, so far).

2002-08-30 15:42  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.h, Source/art/blit.m, Source/art/path.m: Move
	svp rendering code to path.m.

2002-08-30 01:29  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/GNUmakefile, Source/art/ARTContext.m, Source/art/path.m:
	Move remaining path handling code to path.m. Reformat.

2002-08-30 00:33  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/gsc/GSGStateOps.h, Source/art/ARTContext.m: Remove
	ARTGState's own path handling and have it use GSGState's again.

2002-08-28  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	New method [currentPoint], gets used in [DPScurrentpoint::].
	Corrected [DPSarc:::::] and [DPSarcn:::::] to draw the arc in user
	space and transfrom it afterwards and implemented  [DPSarct:::::].

2002-08-28 18:55  Alexander Malmberg  <alexander@malmberg.org>

	* Source/x11/XGBitmapImageRep.m, Source/xlib/XGBitmapImageRep.m,
	Source/x11/GNUmakefile, Source/xlib/GNUmakefile: Move
	XGBitmapImageRep.m from xlib/ to x11/.

	* Source/art/ARTContext.m: Remove the copy of the XGBitmapImageRep
	code.

	* Source/art/blit.m: Add missing include of NSDebug.h.

2002-08-28 16:01  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.m (artcontext_setup_draw_info): Change NSLog to
	NSDebugLLog.

2002-08-28 13:29  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Make the filters used in subpixel rendering
	configurable.

2002-08-28 00:34  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.m: Do basic gamma correction when rendering
	text.

2002-08-27 12:10  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/: Fix copyright notices.

2002-08-27 11:58  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Add experimental subpixel text renderer.

	* Source/art/blit.h, Source/art/blit.m: Add render_blit_subpixel
	function, used in subpixel rendering.

2002-08-27 10:23  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/composite.m,
	Source/art/GNUmakefile: Move compositing code to its own file.
	Reformat.
	(-_composite_func::::::): Handle the plusl_oo case correctly.
	(-compositerect:op:): Handle inline alpha in the general case.

2002-08-26 16:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m: Assume that input isn't premultiplied in
	all cases (to match -xlib behavior, for now). Reformat to fit
	coding standards better.

2002-08-26 15:59  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/art/ARTContext.h, Source/art/ARTContext.m,
	Source/art/ARTWindowBuffer.m, Source/art/GNUmakefile,
	Source/art/blit.h, Source/art/ARTGState.h, Source/art/image.m: Move
	image handling (-DPSimage...) to its own file. Add handling of
	arbitrary transformations, arbitrary bits/samples, bits/pixel, etc.,
	planar data, and gray and cmyk colorspaces.

2002-08-26 01:09  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.m: Reformat to fit coding standards better.

2002-08-26 00:33  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m (-DPSimage:::::::::::): Assume input is
	pre-multiplied.

2002-08-25 21:41  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m (-_composite_func::::::): Implement
	special optimized handling of transparent source.

2002-08-25 20:48  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/gsc/GSGState.h, Headers/gsc/gscolors.h,
	Source/art/ARTContext.m, Source/gsc/GSGState.m, Source/gsc/gscolors.c,
	Source/winlib/WIN32GState.m, Source/xlib/XGGState.m: Optimize color
	handling by passing around pointers to device_color_t structures
	(instead of the structures themselves).

2002-08-23 01:54  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTWindowBuffer.m (+artWindowBufferForWindow:): Mark
	the segment for destruction after X has attached to it.

2002-08-23 01:44  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: Implement handling of non-rectangle
	clipping paths. Use it when rendering paths (but not for other
	operators yet).

2002-08-22 02:34  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: (-DPSrectclip::::): Fix rounding when
	converting to pixel coordinates.

2002-08-21 20:27  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/ARTWindowBuffer.h,
	Source/art/ARTWindowBuffer.m, Source/art/GNUmakefile: Renamed the
	WinImage class to ARTWindowBuffer and moved it to its own file.

2002-08-21 14:52  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.h, Source/art/blit.m, Source/art/ftfont.h,
	Source/art/ftfont.m: Reformat to fit coding standards better.

2002-08-21 13:50  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: Move common code from _fill and DPSstroke
	to convert the current path to an ArtVpath to a new method. Update
	callers.

	(-compositerect:op:): Create alpha buffer for NSCompositeCopy
	if the current color isn't completely opaque.

2002-08-21  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: ([WinImage -_exposeRect:]) Guard against
	invalid coordinates to (hopefully) fix the problem with windows
	turning all white and BadValue warnings appearing.

2002-08-20  Alexander Malmberg <alexander@malmberg.org>

	* Headers/art/, Source/art/: Add back-art, a backend based on
	libart and freetype.

2002-08-15  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Add NetBSD header/ldflag support (Patch from
	Peter Cooper). Cleanup freebsd support.

2002-08-06  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:]): Add special gotShmCompletion
	call for libart backend.

2002-08-02  Adam Fedor  <fedor@gnu.org>

	* Merge from 0.8.0 into main branch.

2002-08-01  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.0
	
	* configure.ac: Check for usleep.
	* Source/x11/XGServerWindow.m ([XGServer -windowdevice:]):
	Use alternate if no usleep.

2002-07-28  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGBitmap.m (_pixmap_combine_alpha): Use
	interger arithmatic. (Patch from Jeff Teunissen)

2002-07-19  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGGeometry.m (clipXRectsForCopying): Shift rect
	origin to account for clipping.
	* Source/xlib/XGGState.m (-setAlphaColor:): Correct colorspace
	of alpha color.

2002-07-17  Adam Fedor  <fedor@gnu.org>

	* Version: 0.7.9

2002-07-14  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XIMInputServer.m (-ximCreateIC:): Don't set
	FocusWindow attrib. Causes a segfault at XCloseDisplay..

2002-07-13  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGBitmap.m (_pixmap_combine_alpha): Fix and
	cleanup alpha blending (Rescale by alpha)
	(_bitmap_combine_alpha): Idem. (Patch from Jeff Teunissen).

2002-06-28  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGFont.m ([XGFontInfo -xCharStructForGlyph:glyph]):
	Fix variable typo - using wrong index to glyph (patch from 
	stoyan@hologr.com).

2002-06-24  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -windowdevice:]): Use
	usleep instead of loop to wait for resize (rewritten
	patch from georg@vhf.de).

Sat Jun 22 14:28:28 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/gsc/GSGState.m ([-DPScurrentpoint::]): Use -invert, not
	-inverse, to invert an affine transform.

Sat Jun 22 14:24:20 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/gsc/GSContext.m
	([-NSDrawBitmap:rect:pixelsWide:pixelsHigh:
	bitsPerSample:samplesPerPixel:bitsPerPixel:bytesPerRow:
	isPlanar:hasAlpha:colorSpaceName:data]): Use scaleXBy:yBy: rather
	than scaleBy::.
	* Source/gsc/GSGState.m ([-DPSscale::]): Idem.
	
2002-06-20  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServer.m (_parse_display_name): New.
	([XGServer -_initXContext]): Use it.

2002-06-15  Alexander Malmberg <alexander@malmberg.org>

	* configure.ac, configure: Use libart2-config and freetype-config
	to get libs and cflags for libart and freetype. Updated configure.
	* Source/gsc/GSGState.m (-DPSinitgraphics): Set alpha _before_
	calling -setColor:state:.

2002-06-10  Adam Fedor  <fedor@gnu.org>

	* Version 0.7.8


2002-06-09  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Set WIN32 and WINLIB only on mingw32 systems.

2002-06-08  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/winlib/WIN32FontInfo.h
	Added ivar for font handle.
	* Source/winlib/WIN32FontInfo.m
	Implemented most of the code to support different fonts.
	
2002-06-08  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	Coorected [DPSrectfill::::], [DPSrectstroke::::] and 
	[DPSrectclip::::] not to change the path. 
	* Source/winlib/WIN32GState.m
	[DPSrectstroke::::] same correction.

2002-06-04  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	Added default implementation for [DPSrectfill::::], 
	[DPSrectstroke::::] and [DPSrectclip::::].
	* Header/winlib/WIN32GState.h
	Added ivar to store old clip region.
	* Source/winlib/WIN32GState.m
	[_paintPath:], [DPSrectclip::::], [DPSinitclip], [setStyle:]  
	and [restoreStyle:]: Rewrote the whole clipping code.
	Added [deepen] and [dealloc] for consistency.
	Simplified [DPSrectstroke::::].
	
2002-06-03  Adam Fedor  <fedor@gnu.org>

	* Source/win32/WIN32Server.m (-beep): Implement
	* Source/winlib/WIN32Context.m (-NSBeep): Remove.

	* Source/x11/XGServer.m (-beep): Implement.
	* Source/xlib/XGContext.m (-NSBeep): Remove.

2002-06-02  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m
	Treat NSBackingStoreRetained the same as NSBackingStoreBuffered, 
	just as the X backends do. 
	* Source/winlib/WIN32GState.m
	Reimplemented creation of bitmaps. This should now work for all 
	bitmaps with >16 bits per pixel. The bitmaps that are still missing 
	are due to clipping problems, as can be seen by switching clipping off.
	
2002-05-12  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSGState.m (-DPSsetalpha:): Call setColor:state:.
	Clamp value to 0<x<1
	(-DPSsetcmykcolor::::): Idem.
	(-DPSsetgray:):Idem.
	(-DPSsethsbcolor:::):Idem.
	(-DPSsetrgbcolor:::):Idem.
	(-GSSetFontSize:): Use given size.
	(-initWithDrawContext:): Call DPSinitgraphics
	(-DPSinitgraphics): Init all our graphics state.  
	* Source/gsc/gscolors.c (gsHSBToRGB): Fix for h==1.
	(gsColorToCMYK): Implement.
	(gsColorToHSB): Idem. (Patches and suggestions from
	alexander@malmberg.org, rearranged a little).

	* Source/xlib/XGFontManager.m (load_cache): Use NSBundle to find
	font_cacher.

	* Source/xlib/XGGState.m (GSSetFont:) Rename from setFont.
	(-DPSinitgraphics): Call super.
	* Source/winlib/WIN32GState.m (-DPSinitgraphics): Call super.

	* Tools/GNUmakefile: Build font_cacher if BUILD_GRAPHICS=xlib

2002-05-11  Richard Frith-Macdonald <rfm@gnu.org>

	* Source/Source/xlib/XGFont.m: ([-xCharStructForGlyph:]) use newer
	GSGFromUnicode() API.

2002-05-09  Adam Fedor  <fedor@gnu.org>

	* Headers/gsc/GSGState.h: Add color and text ivars.
	* Headers/winlib/WIN32GState.h: Idem.
	* Headers/xlib/XGGState.h: Idem.

	* Source/gsc/GSContext.m: Implement font/text methods.
	* Source/gsc/GSGState.m (-setColor:state:) Implement
	Implement color DPS and GS ops to use it.
	Implement text/font ops.

	* Source/winlib/WIN32GState.m (-setColor:state:) Implement.
	Remove color ops (now in GSGState)

	* Source/xlib/XGGState.m (-setColor:state:) Implement.
	(-setAlphaColor:) New.
	Remove color ops (now in GSGState)

2002-05-07  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (-GSSetFont:): Don't flip
	the font for a flipped view.

2002-05-06  Adam Fedor  <fedor@gnu.org>

	* configure.ac (BUILD_SERVER): Set to predefined define
	* Source/GSBackend.m: Use it.

2002-05-05  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Simplify backend selection using --enable-server
	and --enable-graphics. Add --with-library-flags and
	--with-include-flags for adding additonal flags. Revert last
	change to XShm.h test. Add check for art libraries.
	* Source/GNUmakefile: Conform to new configure output
	* Source/GSBackend.m: Idem.
	* Headers/x11/wraster.h: Idem.
	* Source/x11/XIMInputServer.m: Correct define for HAVE_UTF8

	* GNUmakefile.postamble (after-distclean): Remove config.h
	* Source/gsc/GSContext.m (-dealloc): Destroy gstate.
	* Source/x11/XGServerWindow.m([XGServer
	-_addExposedRectangle::]): Use current context class
	([XGServer -flushwindowrect::]): Idem. (patches from 
	alexander@malmberg.org).

2002-05-04  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Improved check for XShm.h
	* Headers/x11/wraster.h: Use HAVE_X11_EXTENSIONS_XSHM_H
	* Source/x11/XIMInputServer.m: Fix #if for USE_XIM (patch from
	alexander@malmberg.org)
	* Source/xlib/XGContext.m: Idem for HAVE_XFT

2002-05-03  Adam Fedor  <fedor@gnu.org>

	* GNUmakefile.postamble: Remove '/' in
	$(INSTALL_ROOT_DIR)/$(GNUSTEP_MAKEFILES) so Windows won't
	complain.

2002-05-02  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Updated to autoconf 2.53 from configure.in
	* configure, config.h.in: Regenerate.
	* acconfig.h: Remove

2002-05-01  Adam Fedor  <fedor@gnu.org>

	* config.make.in: Add newline at end - causes Solaris sed to barf.

2002-04-30  Adam Fedor  <fedor@gnu.org>

	* Version: 0.7.7
	* Documentation/news.texi: Update
	* NEWS: Regenerate.

2002-04-27  Ludovic Marcotte <ludovic@Sophos.ca>

	* Source/xlib/XGFontManager.m: Added a RETAIN call to the
	allFontNames ivar in -enumerateFontsAndFamilies since we would
	reference a dealloc'ed object after this method call.

2002-04-27  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/win32/WIN32Server.h
	* Headers/winlib/WIN32GState.h
	* Source/win32/WIN32Server.m
	* Source/winlib/WIN32GState.m
	Made sure only resources allocated by our code will ever be freed.
	
2002-04-26  Adam Fedor  <fedor@gnu.org>

	* acconfig.h: Define HAVE_UTF8
	* config.h.in: Regen.

2002-04-24  Adam Fedor  <fedor@gnu.org>

	* configure.in: Don't enable wraster support if --with-wraster=none.
	Print error if no backend server or graphics configured.

2002-04-23  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGServer.h: Rework to handle multiple screens.
	* Headers/xlib/XGContext.h: Simplify.

	* Source/win32/WIN32Server.m (-mouseLocationOnScreen:window:): 
	Implement.

	* Source/x11/XGServer.m: Rework to handle multiple screens. New
	XScreenContext class.
	(-initXContext): Use it.
	(-_screenContextForScreen:): Implement.
	(-xrContextForScreen:): Idem.
	(-drawMechanismForScreen:): Idem.
	(-xDisplayRootWindowForScreen:): Idem.
	(-xColorFromColor:forScreen:): Idem.
	* Source/x11/XGServerEvent.m (-mouseLocationOnScreen:window:):
	Implement.
	* Source/x11/XGServerWindow.m (-window::::): Use screen arg.
	(_blankCursor): Use default screen for drawable (?).
	(imagecursor::::::): Idem.

	* Source/xlib/XGBitmapImageRep.m: Update for new server interface.
	* Source/xlib/XGGState.m: Idem.

2002-04-22  Georg Fleischmann

	* back/Source/xlib/XGGState.m
	[XGGState DPSsetlinewidth:]: scale line width.

2002-04-23  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m
	[window::::] corrected and simplified the last change.

2002-04-22  Adam Fedor  <fedor@gnu.org>

	* configure.in: Check for gdi32.

	* Source/win32/WIN32Server.m (window::::): Update for new interface -
	frame is frame rect, not content rect.
	
	* Source/x11/XGServer.m (-_initXContext): Look for
	display attributes in server_info.
	* Source/x11/XGServerWindow.m (-window::::): Update for new interface.

2002-04-21  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/win32
	* Headers/win32/WIN32Server.h
	* Headers/win32/WIN32Geometry.h
	* Source/win32
	* Source/win32/GNUmakefile
	* Source/win32/GNUmakefile.preamble
	* Source/win32/WIN32Server.m
	New directories and files with Display Server for MS Windows.
	* Headers/winlib
	* Headers/winlib/WIN32Context.h
	* Headers/winlib/WIN32GState.h
	* Headers/winlib/WIN32FontEnumerator.h
	* Headers/winlib/WIN32FontInfo.h
	* Source/winlib
	* Source/winlib/GNUmakefile
	* Source/winlib/GNUmakefile.preamble
	* Source/winlib/WIN32Context.m
	* Source/winlib/WIN32GState.m
	* Source/winlib/WIN32FontEnumerator.m
	* Source/winlib/WIN32FontInfo.m
	New directories and files for drawing on MS Windows.
	* configure
	Add library gdi32 for winlib back end.
	* Source/GSBackend.m
	Corrected to handle the winlib/win32 backend correctly.
	* Tools/gpbs.m
	Ifdefed some signals that are not defined in mingw and use spawn 
	instead of fork on mingw. 
	
2002-04-19  Richard Frith-Macdonald <rfm@gnu.org>

        * Tools/gpbs.m: If given -NSHost specification for the current host,
        ignore it and use the standard name.

2002-04-15  Gregory John Casamento <greg_casamento@yahoo.com>
	* configure.in: Added check to determine if libXft contains
	XftDrawStringUtf8 which is used to draw unicode strings.  

2002-04-15  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer
	-_addExposedRectangle::]): Use current server class
	([XGServer -flushwindowrect::]): Idem.
	(Suggestion by alexander@malmberg.org)

	* Source/x11/XIMInputServer.m (-initWithDelegate:display:name:): 
	Use defaultCStringEncoding if UTF8 doesn't work.
	(Patch from stoyan@on.com.ua).

2002-04-14  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGServerWindow.h: Add graphics driver protocol
	information.
	* Source/x11/XGServerWindow.m (_createBuffer:): Use it.
	(-termwindow:): Idem.
	([XGServer -windowbacking::win]): Idem.
	([XGServer -windowdevice:]): Idem.
	([XGServer -_addExposedRectangle::]): Idem.
	([XGServer -flushwindowrect::]): Idem.

	* Source/xlib/XGBitmapImageRep.m: Use new GSCurrentDevice.
	* Source/xlib/XGContext.m: Idem.
	* Headers/xlib/XGGState.h: Use window device, not window number.
	* Source/xlib/XGGState.m: Idem.

Thu Apr 11 22:24:01 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/x11/XGServerEvent.m: Added missing includes.
	* Source/x11/XGServerWindow.m: Idem.
	* Source/x11/XGDragView.m: Idem.
	2
2002-04-11  Richard Frith-Macdonald  <rfm@gnu.org>

	* Tools/gpbs.m: Fixed bug in argument parsing ... was objecting to
	-NSHost!

2002-04-10  Adam Fedor  <fedor@gnu.org>

	* configure.in: Don't set X paths if no X found. Only set
	/usr/local paths for freebsd

	* Source/gsc/GSContext.m: Remove currentgstate, gstate
	* Source/x11/XGServerWindow.m (windowbacking:) Implement.

2002-04-06  Adam Fedor  <fedor@gnu.org>

	* configure.in: Renable XIM by default again.

	* Source/gsc/GSStreamContext.m (GSSetFont:): Implement.
	Fix up show methods and fix spaces in method names.

	* Source/xlib/XGContext.m (-initWithContextInfo:): Return
	alternate (PS) context when indicated.

	* Source/xlib/xrtools.c: Simplify color conversion routines.
	* Source/xlib/XGGState.m: Use them
	
2002-04-03  Adam Fedor  <fedor@gnu.org>

	* Source/GNUmakefile.preamble: Fix LIB_DIRS and
	LIBRARIES_DEPEND_UPON for compiling as a library.

2002-04-02  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSContext.m (-GSDefineGState): Use new def - also
	creates a copy of the gstate.
	(-GSReplaceGState): Replace with copy of current gstate.

	* configure.in (--with-name): Configure the name of the backend
	* back.make.in: Idem.
	* config.make.in: Idem.
	* Source/GNUmakefile: Idem.
	* Documentation/install.texi: Document.

	* Source/GNUmakefile.preamble: Missing include.

	* Source/x11/XGServerWindow.m: Fix slideImage method name.

2002-04-01  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -_setupRootWindow]): Read
	GSAppOwnsMiniwindow default.
	([XGServer -appOwnsMiniwindow]): Use it.
	([XGServer -miniwindow:): Idem.

	* Source/gsc/GSContext.m (-GSSendBezierPath:): Implement
	(-GSRectClipList::): Likewise.
	(-GSRectFillList::): Likewise.
	(-GSCurrentCTM): Likewise.
	(-GSSetCTM:): Likewise.
	(-GSConcatCTM:): Likewise.
	* Source/xlib/XGGState.m ([XGGState -DPSsetmiterlimit:]): Implement
	to do nothing.

	* Source/x11/GNUmakefile: Remove unsed draw.c, gradient.c, misc.c

2002-03-31  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m
	In [window:::] set the initial hints for a window, as
	setWindowHintsForStyle() would otherwise never be called.
	
2002-03-30  Adam Fedor  <fedor@gnu.org>

	* Source/GNUmakefile.preamble: Add graphic includes, -Wall
	* Source/gsc/GNUmakefile.preamble: Likewise.
	* Source/x11/GNUmakefile.preamble: Likewise.
	* Source/xlib/GNUmakefile.preamble: Likewise.

	* Tools/font_cacher.m: Fix include.

2002-03-29  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSGState.m (-GSSendBezierPath:): Append path in all
	cases.
	(- GSRectFillList): Implement.
	* Source/x11/XGServerWindow.m: 
	([XGServer -windowbounds:]): Don't get screen bounds.

	* Source/x11/*.c: Fix includes.

2002-03-27  Adam Fedor  <fedor@gnu.org>

	* Source/x11/GNUmakefile: Get headers from right place.
	* Source/xlib/GNUmakefile: Remove invalid header.
	
	* Source/x11/XGServerWindow.m (-window:::): Change method to
	match frontend (including setting of style).

2002-03-27  Adam Fedor  <fedor@gnu.org>

	* Version: Initial version (most code extracted from xgps).

