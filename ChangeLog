2007-10-18 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoContext.m,
	* Source/cairo/CairoGState.m: Format cleanup.
	* Source/cairo/XGCairoXImageSurface.m (-initWithDevice:): Use
	XGCairoSurface when a NSBackingStoreNonretained type window is used.
	
2007-10-12 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-placewindow:): Change window to be
	temporary resizable. Patch by Wolfgang Lux <wolfgang.lux@gmail.com>. 
	* Source/x11/XIMInputServer.m: Clean up includes to avoid compiler warning.
	* Source/x11/raster.c (calculateCombineArea): Change parameter
	signedness to avoid compiler warnings.
	* Source/x11/convert.c (convertTrueColor_generic,
	convertPseudoColor_to_8): Change parameter signedness to avoid compiler warnings.
	
2007-10-08 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoFontInfo.m
	(-appendBezierPathWithGlyphs:count:toBezierPath:):  First implemenation.
	
2007-10-07 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/gsc/GSFunction.h: Declare the -getsample:: method in
	header.
	
2007-10-05 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/shfill.m (-DPSshfill:): Correct typing error. Remove
	now obsolete method declaration.
	* Headers/gsc/GSFunction.h,
	* Source/gsc/GSFunction.m: New files. Implementation of Postscript
	function taken from art/shfill.m.
	* Source/gsc/GNUmakefile: Compile new file.
	* Source/gsc/GSContext.m (-DPSshfill:), 
	* Source/gsc/GSGState.m (-DPSshfill:): Implement new method.

2007-10-05 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-copyWithZone:): Only use cairo 1.4
	functions when cairo version fits.
	* Source/cairo/XGCairoXImageSurface.m (-initWithDevice:): Use
	depth from window device.

2007-10-01 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGDragView.m: Add missing include.

2007-10-01 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-copyWithZone:): No error logging
	when copy of path fails. This is normal in cairo 1.4.10 for empty
	paths.
	
2007-09-12 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/CairoGState.h,
	* Source/cairo/CairoGState.m (-setSize, -DPSgsave, -DPSgrestore):
	Remove unused methods.
	* Headers/cairo/CairoPDFSurface.h,
	* Source/cairo/CairoPDFSurface.m: New files.
	* Source/cairo/GNUmakefile: Add new source file.
	* Source/cairo/CairoContext.m (-initWithContextInfo:,
	-beginPrologueBBox:...title:) Rewrite to support PDF output.
	
2007-09-09 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-DPSeofill, -DPSfill, -DPSstroke):
	Clear the GNUstep path after operation.

2007-09-06 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-copyWithZone:): Copy dash and clipping.
	* Source/cairo/CairoGState.m (-_setPath:): Clear the cairo path.

2007-09-05 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/x11/XGGeneric.h: Add ivars for event time keeping.
	* Headers/x11/XGServer.h: Declare new event time keeping methods.
	* Source/x11/XGServerEvent.m (-setLastTime:, -lastTime): Implement
	new methods and use them to store event time.
	* Source/x11/XGServerWindow.m: Use these methods to get event time.
	
2007-09-05 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m: Add more checks for cairo status.

2007-09-05 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-_checkStyle:, -windowlist): Use
	defScreen instead of 0.

2007-09-05 Fred Kiefer <FredKiefer@gmx.de>

	* configure.ac,
	* configure: Move checking for Xrender extension.
	* Source/cairo/XGCairoXImageSurface.m: Add include for config.h.
	Patch by Yen-Ju Chen <yjchenx@gmail.com>.
	
2007-09-04 Fred Kiefer <FredKiefer@gmx.de>

	* Source\winlib\WIN32FontInfo.m (-coveredCharacterSet): Create the
	NSMutableCharacterSet to store the character ranges in.

2007-09-03 Nicolas Roard <nicolas@roard.com>

	* configure:
	* configure.ac: check that Xrender lib is present and add it to the
	link process. Only use Xrender for Cairo.
	* Source/cairo/XGCairoXImageSurface.m: use 32 bits surfaces when
	available, else stay with 24bits surface.
	* Source/cairo/CairoGState.m: some cleaning, and fixed the scrolling
	bug. 

2007-09-02 Nicolas Roard <nicolas@roard.com>

	* configure:
	* configure.ac:
	* config.h.in: added checking for Xrender extension
	* Source/x11/context.c: Now check for 32 bit surface + alpha channel
	* Source/cairo/XGCairoSurface.m: Modified to get the correct visual,
	not the default one
	* Source/cairo/CairoGState.m: Use cairo groups to allow recopy on the
	same surface

2007-08-21 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/ftfont.m,
	* Source/art/ftfont-old.m: Extracted code shared between these two
	files into new files.
	* Source/art/FTFaceInfo.h,
	* Source/art/FTFaceInfo.m,
	* Source/art/FTFontEnumerator.h,
	* Source/art/FTFontEnumerator.m: New files with extracted code.
	* Source/art/GNUmakefile: Add new source files.

2007-08-21 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-_setupRootWindow): Revert last
	change.
	* Source/x11/XGServerWindow.m (-setinputfocus:): Use CurrentTime
	instead of generic.lastTime.
	
2007-08-21 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerEvent.m (-processEvent:): Made handling of
	focus in and out more explicit.

2007-08-16 Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGFontManager.m (load_cache),
	* Tools/font_cacher.m (-writeCacheTo): Increase version number of
	font format, as font mask values have changed.

2007-08-16 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-_setupRootWindow): Set lastTime to
	CurrentTime not 1 to get setinputfocus working for the first
	activation of the application.

2007-08-15 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-_checkWMSupports:,
	-_tryRequestFrameExtents:): Correct minor errors.
	* Source/art/ftfont.m (-coveredCharacterSet): Protect against
	illegal characters.

2007-08-15 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m: Add more EWMH methods and helper
	methods for them.
	* Tools/xpbs.m: Simplify dragging support code.

2007-08-13 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/ftfont.m (-coveredCharacterSet): Correct code.
	Patch by Yen-Ju Chen <yjchenx@gmail.com>.

2007-08-07 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/ftfont.m (-coveredCharacterSet): Use local FT_Size
	variable instead of ivar. The ivar is sometimes invalid.
	Cleaned up compiler warnings.

2007-08-02 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServer.m (+initializeBackend): Handle SIGINT by
	calling ([NSApp terminate: NSApp]) to shut down cleanly.

2007-07-03 Sergii Stoian <soyan255@gmail.com>

	* Source/cairo/CairoGState.m
	  (-_setPoint): Adjust point.
	  (-_adjustPath:): Optimize and cleanup.
	  (-compositeGState:fromRect:toPoint:op:fraction:): Adjust toPoint.

2007-07-02 Sergii Stoian <soyan255@gmail.com>

	* Source/cairo/CairoGState.m
	  (-DPSshow:): Apply correct scale and translate transformation matrix.
	  (-DPSsetstrokeadjust:): Implement.
	  (-DPSinitgraphics): Set _strokeadjust to 1 by default.
	  (-_adjustPath:): Implement new method that place the path to pixel
	  boundaries.
	  (-_setPath:): Change method definition adding fillOrClip argument.
	  Use _adjustPath: method.
	  (-DPSclip): Change call of _setPath: to new format.
	  (-DPSeoclip): Ditto.
	  (-DPSeofill): Ditto.
	  (-DPSfill): Ditto.
	  (-DPSstroke): Ditto.
	  (-compositerect:op:): Ditto.
	* Headers/cairo/CairoGState.h: Define _strokeadjust variable.
	* Source/cairo/CairoFontInfo.m: (-widthOfString:): Add sanity check.

2007-06-29 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/CairoSurface.h,
	* Source/cairo/CairoSurface.m (-setSize:): Add method.
	* Headers/cairo/CairoGState.h,
	* Source/cairo/CairoGState.m (-setSize:, -showPage): Add methods.
	* Source/cairo/CairoContext.m (-beginPrologueBBox:...title:,
	-showPage): New methods.
	* Source/cairo/CairoGState.m (-GSShowGlyphs::): Handle rotated
	text correctly.

2007-06-05 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/image.m (-DPSimage:): Replaced appendTransform: with
	prependTransform:. Undoes change from 2004-01-25.

2007-05-02  Nicola Pero  <nicola.pero@meta-innovation.com>

	* Source/GNUmakefile.postamble (after-clean): Remove
	$(BUNDLE_NAME)Info.plist on clean.

2007-04-27 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/CairoSurface.h,
	* Source/cairo/CairoSurface.m: Remove default surface type setting.
	* Headers/cairo/XGCairoSurface.h: Remove includes.
	* Source/cairo/XGCairoSurface.m: Add includes.
	* Headers/cairo/XGCairoXImageSurface.h: Remove includes.
	* Source/cairo/XGCairoXImageSurface.m: Add includes, add  missing
	dealloc method.
	* Headers/cairo/CairoPSSurface.h,
	* Source/cairo/CairoPSSurface.m: New files.
	* Source/cairo/GNUmakefile: Add CairoPSSurface.
	* Headers/cairo/CairoGState.h,
	* Source/cairo/CairoGState.m: Replace method -GSSetDevice::: with
	-GSSetDevice::: and GSCurrentDevice::: with GSCurrentSurface:::.
	* Source/cairo/CairoGState.m (-DPSshowpage): Implement this method.
	* Source/cairo/CairoContext.m (-DPSgrestore, -DPSgsave): Remove
	these newly added methods.
	* Source/cairo/CairoContext.m (-initializeBackend): No longer set
	default surface type.
	* Source/cairo/CairoContext.m (-GSSetDevice:::): Create the
	surface here.
	* Source/cairo/CairoContext.m (-initWithContextInfo:): For PS
	output set the surface here.

2007-04-24 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGDragView.m (-sendExternalEvent:... toWindow:) Tell
	xdnd about available types and selection owner.
	* Source/x11/XGServerEvent.m (processEvent:): Handle case
	SelectionRequest to get some simple xdnd support.
	Based on a patch by Matt Rice <ratmice@yahoo.com>.

2007-04-14  Adam Fedor  <fedor@gnu.org>

	* Version: Bump version

2007-04-04 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/gsc/GSContext.h: Remove ivar gtable.
	* Source/gsc/GSContext.m: Changed to use a gtable object
	shared between all contexts.
	* Headers/cairo/CairoGState.h:
	Declare new methods for save and restore.
	* Source/cairo/CairoContext.m (-DPSgrestore, -DPSgsave): Use these methods.
	* Source/cairo/CairoGState.m (-DPSgrestore, -DPSgsave): Implement
	these methods.
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Another try on conversion of the coordinates.
	
2007-04-14  Adam Fedor  <fedor@gnu.org>

	* Version 0.12.0 (From gnustep-stable branch)

2007-03-30 Fred Kiefer <FredKiefer@gmx.de>

	* header/xlib/XGGeometry.h: Replace calls to the now deprecated
	methods on NSAffineTransform with correct ones.

2007-03-23 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/ReadRect.m,
	* Source/art/composite.m,
	* Source/art/shfill.m,
	* Source/cairo/CairoGState.m,
	* Source/gsc/GSGState.m,
	* Source/winlib/WIN32GState.m,
	* Source/xlib/XGGState.m: Replace calls to the now deprecated
	methods on NSAffineTransform with correct ones.

2007-03-22 Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/ARTGState.h: Declare internal methods.
	* Source/art/ARTGState.m: New file split out from ARTContext.m.
	* Source/art/ARTConext.m: Removed ARTContext bits.
	* Source/art/blit-main.m: New file split out from blit.m.
	* Source/art/blit.m: Removed self include stuff.
	* Source/art/GNUmakefile: Add new source files.
	* Source/art/composite.m: Adopt to GNUstep coding style.

2007-03-22 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Correct computation of source rectangle and add flip correction.
	The later is currently commented out. 

2007-03-21 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m: General clean-up and optimisation of
	this class.

2007-03-21 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-setColor:state): Always call cairo_set_source_rgba().
	* Source/cairo/CairoGState.m (-GSReadRect:): Correct placement of rectangle.
	* Source/cairo/CairoGState.m (-compositerect:op:): Use
	cairo_paint() instead of cairo_fill().

2007-03-18 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m: A complete rewrite, now path and
	transformation handling from the super class get used.
	* Source/cairo/CairoFontInfo.m (-setupAttributes:,
	-drawGlyphs:length:on:): Don't invert the font matrix.
	* Source/gsc/GSGState.m (-DPSrectclip::::, -DPSrectfill::::,
	-DPSrectstroke::::): Use NSBezierPath to get correct results when rotated.

2007-03-11 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGDragView.m (GSActionForDragOperation,
	GSDragOperationForAction): Completed and corrected drag type
	mapping between xdnd and OpenStep. NSDragOperationAll should now
	be map back correctly when converted to xdnd and back again.

2007-03-07 Xavier Glattard <xavier.glattard@online.fr>

	* Source/win32/Event_format.sed,
	* Source/win32/GSDisplayServer_details.m,
	* Source/win32/RELEASE_NOTES,
	* Source/win32/w32_config.h,
	* Source/win32/w32_debug.m,
	* Source/win32/w32_notifications.m: Delete files.
	* Source/win32/WIN32Server.m (and other files):
	Deletion of all non-GNUstep debug stuff (printf...)
	Deletion of all Notification hooks (used for a debugging purpose)
	Deletion of the Application preference Panel that pops up the 1st
	time you run _any_ application. 
	Deletion of the check of GSWINHandlesWindowDecorations and 
	GSWIN32HandlesWindowDecorations options (none worked because of a
	typo and are now deprecated). Use of GSBackHandlesWindowDecorations 
	option like X11 backend instead of GSUseWMStyles (marked as deprecated).
	Use of GSBackUsesNativeTaskbar option instead of GSUseWMTaskbar
	(marked as deprecated)
	All these options are read in -initWithAttribute: (no more in
	+inializeBackend) and set an instance (not class) variable. 
	Add methods -handlesWindowDecorations/-setHandlesWindowDecorations
	Add methods -usesNativeTaskbar/-setUsesNativeTaskbar
	* Source/win32/w32_GLcontext.m:
	Fix a bug in OpenGL sub-window placement when handlesWindowDecorations == YES
	
2007-03-06 Richard Frith-Macdonald <rfm@gnu.org>

	* configure.ac: Add check for syslog
	* config.h.in: regenerate
	* configure: regenerate
	* Tools/gpbs.m: add --auto option to shut down when all connections
	from apps requiring pasteboard services are closed.

2007-03-02 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-DPSinitmatrix, -GSCurrentCTM):
	Don't consider flipped state.
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Simplified the code and now use cairo_paint and cairo_paint_with_alpha.

2007-03-01 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-DPSinitgraphics): Set more cairo state.
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:): Use
	either mask or fill, but not both.

2007-03-01 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-setColor:state:): Use fillColor
	instead of parameter. Only in the former is the alpha field
	set. Bug found by using valgrind.
	
2007-02-28 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/cairo/CairoContext.m (-initWithContextInfo:): Set self
	from super call to get PS contexts working.

2007-02-28  Nicola Pero  <nicola.pero@meta-innovation.com>

	* configure.ac: Use gnustep-config to set GNUSTEP_MAKEFILES
	if not set.
	* GNUmakefile: Same change.
	* configure: Regenerated.

2007-02-28  Nicola Pero  <nicola.pero@meta-innovation.com>

	* Tools/win32pbs.m (WINVER): Define to make it compile with new
	releases where HWND_MESSAGE is not defined unless you explicitly
	request recent Microsoft Windows APIs by setting WINVER.

2007-02-27 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/winlib/Win32FontInfo.m (-setupAttributes:):
	Correct setting of maximumAdvancement and add xHeight.
	* Source/art/ftfont.m (-initWithFontName:matrix:screenFont:):
	Correct setting of maximumAdvancement and xHeight.
	* Source/xlib/GSXftFontInfo.m (-setupAttributes:):
	Correct setting of maximumAdvancement.
	* Source/xlib/XGFont.m(-setupAttributes:): Correct setting of
	maximumAdvancement. 
	* Headers/cairo/CairoFontInfo.h: Add new ivar lineHeight.
	* Source/cairo/CairoFontInfo.m (-setupAttributes:):
	Correct setting of descender and add lineHeight and xHeight.
	* Source/cairo/CairoFontInfo.m (-drawGlyphs:length:on:): Remove adjustment.
	* Source/cairo/CairoGState.m: Better protection against _ct being null.
	
2007-02-27  Nicola Pero  <nicola.pero@meta-innovation.com>

	* Source/GNUmakefile.postamble (config.h): Use MKDIRS, not
	GNUSTEP_MAKEFILES/mkinstalldirs, to create local directories.

2007-02-27  Nicola Pero  <nicola.pero@meta-innovation.com>

	* Source/x11/GNUmakefile.preamble (GNUSTEP_INSTALL_LIBDIR): Do
	not set this obsolete/unused variable.
	* Source/xdps/GNUmakefile.preamble: Same change.
	* Source/xlib/GNUmakefile.preamble: Same change.
	* Source/win32/GNUmakefile.preamble: Same change.
	* Source/winlib/GNUmakefile.preamble: Same change.
	* gnustep-back-debug.spec.in: Obsolete file removed.
	* GNUmakefile (CVS_MODULE_NAME): Obsolete variable removed.
	
2007-02-27  Nicola Pero  <nicola.pero@meta-innovation.com>

	* configure.ac: Fixed typo: store XFT_LIBS in CAIRO_LIBS, not in
	CAIRO_CFLAGS.
	* configure: Regenerated.
	
2007-02-24 Graham J Lee <leeg@thaesofereode.info>

	* Source/cairo/CairoGState.m (DPSmoveto::, DPSlineto::,
	DPSnewpath): check for valid context.

2007-02-18 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/cairo/CairoGState.m (_set_op): Change cairo operators for
	NSCompositeHighlight and NSCompositePlusDarker.
	* Source/cairo/CairoGState.m (DPSrectstroke::::, DPSrectfill::::,
	DPSrectclip::::): Use cairo_rectangle.
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Changed to work like the other backends for the Gorm palette images.

2007-02-17 Richard Frith-Macdonald <rfm@gnu.org>

	* GNUmakefile.postamble: fix typo

2007-02-15  Nicola Pero  <nicola.pero@meta-innovation.com>

	* configure.ac: Source GNUstep.sh then use GNUSTEP_SYSTEM_HEADERS
	and GNUSTEP_SYSTEM_LIBRARIES if available rather than using
	hardcoded paths.
	* configure: Regenerated.
	
2007-02-14  Nicola Pero  <nicola.pero@meta-innovation.com>

	* Fonts/GNUmakefile (back-resources_INSTALL_DIR): New variable.
	* Fonts/GNUmakefile.postamble (before-uninstall): Updated the
	install rules to not use GNUSTEP_INSTALLATION_DIR.

2007-02-13 Xavier Glattard <xavier.glattard@free.fr>

	configure.ac: opengl fixups for win32

2007-02-11 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/cairo/CairoGState.m (-DPScharpath::, -DPSshow:,
	-GSSetFont:, -GSSetFontSize:, -GSShowText::, -GSShowGlyphs::):
	Protect all font operation from _ct being NULL. 
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Small improvement for scrolling.
	
2007-02-11 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/cairo/CairoGState.m (-GSReadRect:): Implemented this method.

2007-02-10 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/gsc/GSGState.m (-bezierPath): New method.
	* Source/gsc/GSGState.m (-DPSpathbbox::::): Corrected to use new method.
	* Source/cairo/CairoGState.m (-GSSetPatterColor:,
	-pointInMatrixSpace:, -deltaPointInMatrixSpace:,
	-rectInMatrixSpace:, -DPSarct:, -GSReadRect:): New methods to
	override super implementation.
	* Source/cairo/CairoGState.m (-GSCurrentCTM, -GSConcatCTM:,
	-DPStranslate::, -DPSscale::, -DPSrotate:, -DPSinitmatrix,
	-DPSconcat:) Protect all matrix operation from _ct being NULL.
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Small improvents to both unflipped case.

2007-02-08 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/winlib/WIN32FontInfo.m:
	Fix error calculating advancement.

2007-01-31 Richard Frith-Macdonald <rfm@gnu.org>

	* Source\winlib\WIN32FontInfo.m:
	* Source\winlib\GNUmakefile.preamble:
	* Source\win32\GNUmakefile.preamble:
	* Headers\winlib\WIN32FontInfo.h:
	Implement number of glyphs and covered characterset.
	Set maximumAdvancement.

2007-01-31 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/art/ftfont.m: Implement methods to get count of characters
	and characterset based on code by Yen-Ju Chen
	* Source/cairo/CairoFontEnumerator.m: Tidy layout
	* Source/cairo/CairoFaceInfo.m: ditto
	* Source/cairo/CairoFontInfo.m: ditto

2007-01-31 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/win32/WIN32Server.m:
	* Source/win32/GNUmakefile:
	* Source/win32/w32_GLcontext.m:
	* Source/win32/w32_GLformat.m:
	* Headers/win32/WIN32OpenGL.h:
	OpenGL support patch by: Xavier Glattard <xavier.glattard@free.fr>.

2007-01-31 Richard Frith-Macdonald <rfm@gnu.org>

	* Source\winlib\WIN32FontInfo.m: Attempt to make unicode clean
	* Source\winlib\WIN32FontEnumerator.m: ditto
	* Source\win32\WIN32Server.m: Implement -windowlist method.

2007-01-15  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -orderwindow:::]): Set
	icon hints regardless of window manager (patch #5434 from Yen-Ju
	Chen).

2007-01-14 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGGLContext.m: Fixup coordinates of subwindow for
	bug report by Xavier Glattard.

2006-12-31 Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/cairo/CairoGState.m (-setOffset:, -DPSinitmatrix): Use
	cairo functions to handle offset.
	* Source/cairo/CairoGState.m (-GSCurrentCTM): Changed order of
	transformations. 
	* Source/cairo/CairoGState.m (-compositeGState:...fraction:):
	Corrected cases for flipped surface.

2006-12-31 Richard Frith-Macdonald <rfm@gnu.org>

	* configure.ac:  Explicitly add freetype libs and flags when building
	cairo, in case the cairo config stuff has left them out.
	Should fix bug #18508
	* configure: regenerate

2006-12-30  Mark Tracy <tracy454@concentric.net>
	* Source/art/ReadRect.m (-GSReadRect:): incorporate offset into
	coordinate transformation calculations. Fixes bug #18260

2006-12-28  Matt Rice  <ratmice@gmail.com>

	* Source/x11/XGServerWindow.m (-flushwindowrect::): Don't convert 
	rect origin sent to handleExposeRect:forDriver: to int and back to
	float.

2006-12-27 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/cairo/CairoContext.m: declare XWindowBuffer class
	* configure.ac: disable glitz (if it cannot be found) in such a
	way that Cairo backend still builds/runs.
	* configure: regenerate

2006-12-26 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/x11/XGGeneric.h: Added XGWMNetStates.
	* Source/x11/XGServerWindow.m (-_checkWindowManager,
	-setwindowlevel::): Prevent some window types from showing up in
	the taskbar for old window managers that cannot handle window types.
	Patch by Yen-Ju Chen <yjchenx@gmail.com>.
	
2006-12-26 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/XGCairoXImageSurface.h:
	* Source/cairo/XGCairoXImageSurface.m (-initWithDevice:):  Use
	XWindowBuffer to draw on.
	* Source/cairo/CairoContext.m (+initializeBackend): Use
	XGCairoXImageSurface as surface. 
	* Source/cairo/CairoGState.m (-DPSimage:...:): Respect endianess,
	when creating a cairo image surface.
	Patch by Yen-Ju Chen <yjchenx@gmail.com>.
	
2006-12-19 Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/XGCairoGlitzSurface.m (-initWithDevice:): Correct
	getting of visual ID. 
	Patch by: Xavier Glattard <xavier.glattard@free.fr>.
	
2006-12-08 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerEvent.m: Fix incorrect setting for second help
	key.
	* Documentation/Back/DefaultsSummary.gsdoc: Document mappings of
	X keys to help keys.

2006-11-25  Matt Rice  <ratmice@gmail.com>

	* Source/art/ftfont.m (appendBezierPathWithGlyphs:count:toPath:):
	Uncomment code and switch to using FTC_Manager_LookupSize.

2006-11-19 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/winlib/WIN32GState.m:
	* Source/art/path.m:
	* Source/art/ftfont.m:
	* Source/art/ftfont-old.m:
	* Source/art/shfill.m:
	* Source/art/image.m:
	* Source/xlib/XGGState.m:
	* Source/x11/XGServerWindow.m:
	Use accessor method (-transformStruct) to get at affine transform
	internals.  Make art code closer to coding standards in an attempt
	to improve readability.

2006-11-15  Nicola Pero  <nicola.pero@meta-innovation.com>
	
	Notice: you should now use 'make DESTDIR=/tmp/xxx install' if you
	want to relocate all the installation into /tmp/xxx/
	* GNUmakefile.postamble: Use DESTDIR instead of INSTALL_ROOT_DIR
	everywhere.

	* Documentation/Back/GNUmakefile: Use GNUSTEP_INSTALLATION_DOMAIN
	instead of GNUSTEP_INSTALLATION_DIR.
	* Documentation/GNUmakefile: Same change.
	* Fonts/GNUmakefile: Same change.
	* Source/GNUmakefile: Same change.
	* Source/art/GNUmakefile: Same change.
	* Source/cairo/GNUmakefile: Same change.
	* Source/gsc/GNUmakefile: Same change.
	* Source/x11/GNUmakefile: Same change.
	* Source/xdps/GNUmakefile: Same change.
	* Source/xlib/GNUmakefile: Same change.
	* Source/win32/GNUmakefile: Same change.
	* Source/winlib/GNUmakefile: Same change.
	* Tools/GNUmakefile: Same change.

2006-11-03 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/xlib/XGFont.m: Assume ascii encoding as a fallback if no
	mapping can be found from the font registry to the encoding.

2006-10-31  Matt Rice  <ratmice@yahoo.com>
	
	* Source/x11/XGServerEvent.m (_handleTakeFocusAtom:forContext:):
	Unset ignore_take_focus for the key window.

2006-10-29 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/xlib/XGFont.m: Use encodingFromCharset (undeprecated and
	handles more cases than GSEncodingForRegistry)

2006-10-28  Adam Fedor  <fedor@gnu.org>

	* back.make.in: Use correct flags;
	* Source/GNUmakefile.preamble: Add library depends for backend.
	(Partial fix for Bug #16453, see also gui).

2006-10-27 Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XIMInputServer.m (-initWithDelegate:display:name:):
	Replace call to GetStringEncoding with [NSString
	localizedNameOfStringEncoding:] 
	* Source/x11/XGServerWindow.m (-_setupMouse): Make log message on
	multiple mouse buttons a debug log message. Seems like newer X
	servers detect loads of mouse buttons which are not there.
	
2006-10-21  Matt Rice  <ratmice@yahoo.com>
	
	* Source/win32/WIN32Server.m: Update -windowlist implementation.
	* Source/x11/XGServerWindow.m (-orderwin:::): Replace
	desiredOrderedWindow with ignore_take_focus.
	(windowlist): Implement.
	(setinputfocus:): Replace desiredOrderedWindow with ignore_take_focus.
	* Headers/x11/XGGeneric.h (XGGeneric): Remove desiredOrderedWindow.
	* Headers/x11/XGServerWindow.h (gswindow_device_t):
	Add ignore_take_focus.

2006-10-15 22:48-EDT Gregory John Casamento <greg_casamento@yahoo.com>

	* Source/gsc/GSStreamContext.m: GSRectClipList() copied 
	implementation from GSGState.m.

2006-10-15 11:14-EDT Mark Tracy <tracy454 at concentric dot net>

	* Source/gsc/GSStreamContext.m: GSStreamContext did not implement 
	GSRectFillList fix: copied code from GSGState.m.
	Patch applied by Gregory Casamento
	
2006-10-12  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGFontSetFontInfo.m (-drawGlyphs:length:onDisplay:drawable:with:at:], [-widthOfGlyphs:length:]): Fix spelling of length
	
2006-10-11 Nicola Pero <nicola.pero@meta-innovation.com>

	* GNUmakefile (GNUSTEP_INSTALLATION_DOMAIN): Use GNUSTEP_INSTALLATION_DOMAIN
	instead of GNUSTEP_INSTALLATION_DIR.

2006-10-04 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerEvent.m:
	For help key, generate key/down/up ewvent as well as flag changes.
	Use X Super_L key symbol as default backup help key, since many
	keyboards don't have a help key mapping by default, but the super
	keys are often the 'windows' keys available on PC keyboards.
	* Version: bump version number for next release

2006-10-04 Fred Kiefer <FredKiefer@gmx.de>

	* Headers/gsc/GSGState.h: Added copying protocol.
	* Headers/cairo/CairoGState.h: Removed duplicated ivars that are
	already defined in the new super class GSGState.
	* Source/cairo/CairoGState.m: Changed to use super class ivars
	where apropriate. Removed all compiler warnings. Changed colour
	setting and getting to work with super class methods. 
	Reimplemented DPSinitmatrix to handle offset and use this from
	everywhere. Removed methods duplicating super class code. 
	* Source/cairo/CairoContext.m (GSWSetViewIsFlipped:): Removed as
	super class implementation should be used.

2006-10-03 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XWindowBuffer.m: ([_exposeRect:])
	Clip draw area to size of buffer rather than size of wiondow,
	in case the two have become out of sync somehow.
	* Source/win32/WIN32Server.m: Add help key mask
	* Source/x11/XGServerEvent.m: ditto

2006-10-02  Nicola Pero <nicola.pero@meta-innovation.com>

	* configure.ac: Check the new variable GNUSTEP_IS_FLATTENED,
	and default to yes.
	* configure: Regenerated.

2006-09-29 Hans Baier <hansfbaier@googlemail.com>

	* Source/cairo/CairoGState.m: Added hack to retrieve current rgb
	and alpha from cairos internal structures. Will be replaced by proper
	code when the cairo functions are available
	* Source/cairo/CairoGState.m:
	* Headers/cairo/CairoGState.h: refactored class as a subclass of 
	GSGState. Removed all unimplemented methods implemented in the 
	superclass.
	* Headers/cairo/CairoFaceInfo.h: fixed header file to include the
	needed freetype headers
	* Source/cairo/XGCairoGlitzSurface.m: fixed glitz api change
	glitz_glx_find_drawable_format -> 
	glitz_glx_find_drawable_format_for_visual. Compiles now but doesnt
	work yet, because I don't know how to retrieve a proper VisualID.
	someone who knows, please fix it!
	
2006-09-28 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/win32/WIN32Server.m: Use GSBackHandlesWindowDecorations
	* Source/x11/XGServerWindow.m:  ditto
	New user default to turn on backend handling of window decorations
	for all backends which support it.

2006-09-27 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerWindow.m: Add more debug for checking style
	Use _NET_FRAME_EXTENTS or _KDE_NET_WM_FRAME_STRUT to determine
	offsets if our window manager supports them.

2006-09-26 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerWindow.m: Add more debug for checking style
	offsets. Wait for up to a second for visibility events in case
	XSync() does not work to ensure we receive them.

2006-09-25 Richard Frith-Macdonald <rfm@gnu.org>

	* Headers/x11/XGGeneric.h: Extra fielkd to flag when style offsets
	are known.
	* Source/x11/XGServerEvent.m: Add a lot more debug logging for
	reparenting.  Ignore and log changes to 'known' style offsets.
	* Source/x11/XGServerWindow.m: On startup we now check to see if
	style offsets have been recorded in the root window, and if not
	we briefly create a test window of each style to determine style
	offsets, so we know what the offsets are for each style before
	anything attempts to use them.

2006-09-24 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerEvent.m: Use #if to disable old window exposure
	mechanism in favour of sending exposure events to the front end.
	Hopefully this will fix a bug where the old bypassing of the gui
	event queue could cause an attempt to copy from a region outside
	the image buffer.
	If there are no problems with this, we should remove the old, complex
	mechanism.

2006-09-13 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerWindow.m: use generic.wintypes.win_modal_atom
	for popup menu in gnome/ewmh window manager so that popup menus work
	in modal windows.  Reported as bug 17713 by Yen-Ju Chen.

2006-09-12 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/art/ARTContext.m:
	* Source/art/path.m:
	* Source/art/composite.m:
	* Source/art/shfill.m:
	* Source/art/image.m:
	* Source/xlib/XGGState.m:
	* Source/x11/XGServerWindow.m:
	* Source/x11/XGServerEvent.m:
	Get backend to generate NSEvent objects with event location given in
	OpenStep coordinates. Fix flushwindowrect coordinate handling.
	Update art backend to try to honor the x and y window offsets
	provided in the graphics state.

2006-09-09 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServerWindow.m: ([_XFrameToOSFrame:for:]) fix transform
	error.

2006-09-08 Adam Fedor <fedor@gnu.org>

	Tools/gpbs.1: Add documentation on options (from Dennis Leeuw).

2006-09-06 Richard Frith-Macdonald <rfm@gnu.org>

	* Headers/x11/XGGeneric.h: New ivars to hold offsets for different
	window styles.
	* Source/x11/XGServerWindow.m: Offset handling and frame management
	routines rewritten to try to get it right more often.
	Fix long-standing bug positioning windows ... so initial positions
	of titled windows should not conflict with horizontal menu.
	* Source/x11/XGServerEvent.m: Rewritten code which handles reparenting
	notification so that we calculate the offsets of our window properly.
	NB. these fixups require corresponding fixups in the gui library.

2006-08-17 Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/GSXftFontInfo.m:
	changed method signatures to fix typos (lenght->length)
	Patch by: Hans Baier <hansfbaier@gmail.com>
	
2006-08-13 Christopher Armstrong <carmstrong@fastmail.com.au>

	* Source/winlib/WIN32GState.m: Fixups to last patch

2006-08-10 Christopher Armstrong (carmstrong@fastmail.com.au)
	(patch committed by Greg Casamento) 
	* Source/winlib/WIN32GState.m: Better 24bit image support, Slightly 
	extended composite method, Dashed-line handling (for selections)
	* Headers/winlin/WIN32FontInfo.m: Changed method 
	signature draw:length:onDC:at: to correct spelling of length.

2006-08-01 Riccardo Mottola <riccardo@kaffe.org>

	* Headers/xlib/XGPrivate.h,
	Headers/xlib/GSXftFontInfo.h,
	Headers/xlib/XGFontSetFontInfo.h:
	changed method signatures to fix bug intruduced by RFM during typo fixes
2006-07-09  Fred Kiefer <FredKiefer@gmx.de>

	* Header/x11/XGGeneric.h,
	* Source/x11/XGServerWindow.m (-_setupRootWindow, -window::::),
	* Source/x11/XGServerEvent.m (-processEvent:):
	Impelemented handling for _NET_WM_PING.

2006-07-07 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGServer.m:
	Handle SIGTERM by calling ([NSApp terminate: NSApp]) to shut down
	cleanly.

2006-07-04 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/art/ftfont.m:
	* Source/x11/XGServer.m:
	* Source/x11/XGDragView.m:
	* Source/GSBackend.m:
	* Source/gsc/GSGState.m:
	* Tools/gpbs.m:
	Avoid spurious warnings produced by gcc-4.1

2006-06-22 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/gpbs.m: Fix to get profiling to work for this daemon

2006-05-29  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGGState.m (-dealloc, -deepen):
	Free XFT drawing structures and don't reuse the same ones for
	copies of the gstate. Fixes bug #13705.
	
2006-05-29  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/GSXftFontInfo.m (FcFontEnumerator
	-defaultSystemFontName, -defaultBoldSystemFontName,
	-defaultFixedPitchFontName): Added this methods which return
	values similar to the art and cairo backend.
	Removed compiler warnings from this file.
	* Source/xlib/XGFontSetFontInfo.m (-dealloc): Call super dealloc.
	* Source/xlib/XGGeometry.m
	* Source/xlib/XGFont.m
	* Source/xlib/XGGState.m:
	* Tools/font_cacher.m:
	Removed compiler warnings. 

2006-05-27  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-_DPSsetcursor::): Don't set cursor
	on root window. Patch by Mircea Trache <aer@shaw.ca>.

2006-05-13  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/x11/XGServer.h,
	* Source/x11/XGServerWindow.m (-_XFrameToXHints:for:): New method to
	compute X hints directly from X frame. Previously the X frame
	was converted to an OS frame and from this the X hints were computed.
	* Source/x11/XGServerWindow.m, Source/x11/XGServerEvent.m:
	Replaced all usages of [_OSFrameToXHints:for:] with [_XFrameToXHints:for:].
	
2006-05-04  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-styleoffsets::::::): New method to
	compute window frame offset based on the _NET_FRAME_EXTENTS or
	_KDE_NET_WM_FRAME_STRUT property. This is based on a slightly
	extended patch by Yen-Ju Chen <yjchenx@hotmail.com>.
	Call this new method from [styleoffsets:::::] and [_OSFrameToXHints:].
	* Source/x11/XGServerWindow.m (-iconTileImage): Make sure the
	window pointer gets freed.

2006-05-03  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-nativeWindow:::::): Implemented to
	support using an X window for GNUstep drawing.

2006-04-30  David Ayers  <d.ayers@inode.at>

	* Source/x11/raster.c (RCreateImage): Remove unused variables.

	* Source/x11/XGServerEvent.m (gotShmCompletion:) Declare privat
	interface for shared memory handling.
	
2006-03-13  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m (titlewindow::): Set NAME and ICON_NAME
	WM properties (Patch #5014 from Yen-Ju Chen).

2006-03-12  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/XGCairoGlitzSurface.m
	* Headers/cairo/XGCairoGlitzSurface.h:
	Rewrote to fit with changed glitz interface.
	
2006-03-13  Adam Fedor  <fedor@gnu.org>

	* Version 0.10.3

2006-03-13  Fred Kiefer <FredKiefer@gmx.de>
	
	* Source/x11/XGServerWindow.m (-termwindow:): Reset the window
	cache, if it points to the terminated window.

2006-03-12  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/NSBezierPathCairo.m
	* Source/cairo/NSBezierPathCairo.h
	* Source/cairo/CairoDevice.m
	* Source/cairo/CairoFontManager.m
	* Source/cairo/CairoFreeTypeFontInfo.m
	* Headers/cairo/CairoDevice.m
	* Headers/cairo/CairoFontManager.m
	* Headers/cairo/CairoFreeTypeFontInfo.m:
	Removed these files.
	* Source/cairo/GNUmakefile:
	Removed references to obsolete files.
	* Source/cairo/CairoFontInfo.m (-setCacheSize:):
	Fill the cache with zeros.
	* Source/cairo/CairoFontInfo.m (-setupAttributes):
	Free the font options.
	* Source/cairo/CairoGState.m (:bezierPath, -GSSendBezierPath:):
	Added NSBezierPath methods. 	
	* Source/cairo/XGCairoXImageSurface.m
	* Source/cairo/CairoContext.m
	* Source/cairo/XGCairoSurface.m
	* Source/cairo/CairoSurface.m
	* Source/cairo/XGCairoGlitzSurface.m
	* Headers/cairo/CairoSurface.h:
	Clean up of cairo backend code.
	
2006-03-07  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-compositeGState:...fraction:,
	DPSimage::...:): Handle flipped views correctly.

2006-02-22 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/gsc/GSStreamContext.m: Fix opening of file on mingw32
	Don't log where we are printingf to unless debugging is on.

2006-02-13  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-copyWithZone:): Handle more of the
	state parameters in copy.
	* Source/cairo/CairoGState.m (-compositerect:op:): Protect
	operator setting with save/restore.

2006-02-12  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-compositeGState:...fraction:): Deal
	with flipped views. Also some cleanup in the whole file and a hack
	to set alpha.

2006-02-11  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-DPSImage::::::::): Handle missing
	parameters, row end padding and destroy the temporary image at the
	very end.

2006-02-06  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServer.m (_initXContext): Don't set the environment
	value for NSHOST. Patch by Tim MacIntosh <tmcintos@avalon.net>. 
	See mails on dev mailing list for more explaination.

2006-02-06  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/x11/xdnd.h: Declare two more functions used in xpbs.m.
	* Tools/gpbs.m: Removed compiler warnings about mismatching declarations.

2006-01-29  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoFontInfo.m (_cairo_extents_for_NSGlyph,
	-drawGlyphs:length:on:) Corrected the conversion from NSGlyph to UTF8.
	* Source/cairo/CairoFontEnumerator.m:
	Use the same default fonts as the art backend.
	
2006-01-23  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/CairoFaceInfo.h,
	* Source/cairo/CairoFaceInfo.m,
	* Source/cairo/CairoFontEnumerator.m,
	* Source/cairo/CairoFontInfo.m:
	Rewrite of all cairo font handling to work with exported cairo
	functions and enumerate fonts with the font config library.

2006-01-14 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/gsc/GSContext.m:
	* Source/x11/XGServer.m:
	* Source/x11/XGServerWindow.m:
	* Source/x11/XWindowBuffer.m:
	* Headers/x11/XGServerWindow.h:
	Some fixes for 64bit processor support.  In particular, allow for
	bug/feature of X that 32bit data supplied in XChangeProperty must
	actually be 64bit on a 64bit machine.  The X client library discards
	the upper 32bits of each value when encoding the data to be sent to
	the server.  These changes fix WindowMaker interaction on AMD64.

2006-01-09 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/win32/WIN32Server.m: Attempt to terminate gracefully when
	a quit message is received.

2005-12-22  Adam Fedor  <fedor@gnu.org>

	* Version 0.10.2

	* Source/art/ARTContext (-beep): Removed, unused.
	* Source/xdps/NSDPSContext.m (-beep): Idem.

2005-12-20  Adam Fedor  <fedor@gnu.org>

	* Source/art/ARTContext.m ([ARTContext -beep]): Respect user setting
	of bell volume.
	* Source/x11/XGServe.m: Idem.

2005-12-16  Adam Fedor  <fedor@gnu.org>

	* configure.in: Check for Xutf8LookupString
	* Source/x11/XIMInputServer.m: Use it.

2005-12-10  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-titlewindow::): Use UTF8 window
	title where possible.

2005-11-20  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check for winlib as well so we don't get invalid
	backend.

2005-11-19 21:39  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m (flip_bytes, byte_order)
	(-initWithContextInfo:): Detect if the server doesn't have the same
	endianness and adjust the color bitmasks if necessary.

2005-11-18  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-window::::): Don't use the NET WM
	window icon for Window Maker. 
	* Source/x11/XGServerWindow.m (_createNetIcon:::, _setNetWMIconFor:):
	Rewrote this methods to be prepared to use the mini window icon,
	when that gets available in back.

2005-11-16 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/art/composite.m:
	* Source/art/ftfont-old.m:
	* Source/art/ftfont.m:
	* Source/art/shfill.m:
	* Source/cairo/CairoDevice.m:
	* Source/cairo/CairoFreeTypeFontInfo.m:
	* Source/cairo/CairoGState.m:
	* Source/gsc/GSContext.m:
	* Source/gsc/GSStreamContext.m:
	* Source/win32/GSDisplayServer_details.m:
	* Source/win32/WIN32Server.m:
	* Source/win32/w32_activate.m:
	* Source/win32/w32_debug.m:
	* Source/win32/w32_movesize.m:
	* Source/win32/w32_notifications.m:
	* Source/win32/w32_windowdisplay.m:
	* Source/winlib/WIN32GState.m:
	* Source/x11/XGGLContext.m:
	* Source/x11/XGGLFormat.m:
	* Source/x11/XGServerEvent.m:
	* Source/x11/XGServerWindow.m:
	* Source/xdps/AFMFileFontInfo.m:
	* Source/xdps/NSDPSContext.m:
	* Source/xdps/NSDPSContextOps.m:
	* Source/xlib/XGBitmap.m:
	* Source/xlib/XGCommonFont.m:
	* Source/xlib/XGFontSetFontInfo.m:
	* Source/xlib/XGGState.m:
	* Tools/font_cacher.m:
	* Tools/xpbs.m:
	Some fixups for coding style violations.  Should have no effect other
	than to render code more consistent/readable.

2005-11-07  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (_createNetIcon, _setNetWMIconFor:):
	New methods to create and set NET WM icon for window.
	* Source/x11/XGServerWindow.m (-window::::): Use this methods to
	set window icon. 

	* Source/cairo/CairoGState.m (-DPSImage::::::::): Try to deal with
	flipped views.
	* Source/cairo/CairoFontInfo.m: Reduced the amount of unexported cairo
	functions we use.

2005-10-30 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/win32/WIN33Server.m: synchronize defaults so settings are
	not lost.  Tidy a lot of stuff to conform to coding standards.
	Update event handling code to use ET_WINMSG rather than less versatile
	deprecated API.

2005-10-23  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check for invalid backend graphics name.
	Error if no X11 libraries if using x11 server.

2005-10-20  Adam Fedor  <fedor@gnu.org>

	* Headers/win32/WIN32Server.h: uint -> unsigned int
	* Source/win32/...: Idem.
	* Source/win32/w32_notifications.m: Comment out unimplmented
	windows method.

2005-10-20 Tom MacSween <macsweent@sympatico.ca>

	* Source/win32/: Fixed a compile error when debug flags were
	activated. Removed detailed documation from MS. Read and
	write correctly from defaults.

2005-09-19  Adam Fedor  <fedor@gnu.org>

	* Version 0.10.1

	* configure.ac: Make art the default graphics module.

2005-09-14  Tom MacSween <macsweent@sympatico.ca>

	* Restructuring of the windows server to handle various
	window and toolbar issues (See Source/win32/RELEASE_NOTES for
	more info).
	* Headers/win32/WIN32Server.h: Added ivars and flags and methods.
	* Headers/winlib/WIN32GState.h: Added method to avoid confliting
	types with superclass.
	* Source/win32/GNUmakefile: Add new files.
	* w32_debug.m, w32_activate.m, w32_create.m, w32_general.m,
	w32_movesize.m, w32_text_focus.m, w32_windowdisplay.m,
	GSDisplayServer_details.m: New files.
	* Source/win32/WIN32Server.m: Large changes. Merged with 
	WIN32ServerEvent. Lots of documentation.

	* Source/winlib/WIN32GState.m: Variable name changes to 
	avoid shadowing.

2005-08-28  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/CairoSurface.h,
	* Source/cairo/CairoSurface.m,
	* Source/cairo/XGCairoGlitzSurface.m,
	* Source/cairo/XGCairoSurface.m,
	* Source/cairo/XGCairoXImageSurface.m,
	* Source/cairo/CairoGState.m (-GSSetDevice:::):
	Rewrote the device handling to work for resized windows.
	* Headers/cairo/CairoFontInfo.h,
	* Source/cairo/CairoFontInfo.m (-drawGlyphs:length:on:, -setupAttributes),
	* Source/cairo/CairoGState.m (-GSShowGlyphs::):
	Moved adjustment of font size and positioning to CairoFontInfo.
	* Source/cairo/CairoContext.m:
	Clean up.

2005-08-20  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoGState.m (-DPSImage::::::::):
	For the ARGB32 case sort the colour fields in the bitmap correctly.
	
2005-08-20  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoFaceInfo.m (-fontFace): Use
	_cairo_toy_font_face_create, as Cairo did rename this function.
	* Source/cairo/CairoFontInfo.m (_cairo_glyph_for_NSGlyph): Use
	Cairo function _cairo_scaled_font_text_to_glyphs to convert to glyphs.

2005-08-16  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/art/ftfont.m (-[FTFontInfo drawString:...]):
	Initialize index d for delta_data[].  (Already done in ftfont-old.)

2005-07-28  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/cairo/CairoFaceInfo.h,
	* Headers/cairo/CairoFontEnumerator.h,
	* Headers/cairo/CairoFontInfo.h,
	* Headers/cairo/CairoSurface.h,
	* Headers/cairo/XGCairoSurface.h,
	* Source/cairo/CairoContext.m,
	* Source/cairo/CairoGState.m,
	* Source/cairo/CairoFaceInfo.m,
	* Source/cairo/CairoFontInfo.m,
	* Source/cairo/CairoFontEnumerator.m,
	* Source/cairo/CairoSurface.m,
	* Source/cairo/NSBezierPathCairo.m,
	* Source/cairo/XGCairoGlitzSurface.m,
	* Source/cairo/XGCairoSurface.m,
	* Source/cairo/XGCairoXImageSurface.m:

	Adopted to changes in latest release of cairo.

	* Source/cairo/GNUmakefile:
	Removed file CairoFontManager.m
	
2005-07-22  Adam Fedor  <fedor@gnu.org>

	* Version 0.10.0

2005-07-17  Adam Fedor  <fedor@gnu.org>

	* Version: Add interface version number
	* Source/GNUmakefile: Use it.
	* Source/GNUmakefile.postamble: Idem, add custom Info.plist.
	* Source/GNUmakefile.preamble: Update for interface version.

2005-07-14  Adam Fedor  <fedor@gnu.org>

	* Source/winlib/WIN32GState.m ([WIN32GState -compositeGState:...]): 
	Fall through to default operation if alpha blend not sucessful.

2005-07-09  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/gsc/GSGState.h,
	Source/gsc/GSGState.m: New methods  
	[-compositeGState:fromRect:toPoint:op:fraction:] and
	[GSSetPatterColor:]. Also added ivar pattern. 
	* Source/gsc/GSGState.m (-dealloc, -deepen, -setColor:state:):
	Deal with pattern ivar.
	* Source/gsc/GSContext.m,
	Source/gsc/GSStreamContext.m: New methods
	[-GScomposite:toPoint:fromRect:operation:fraction:] and 
	[-GSSetPatterColor:].
	* Source/xlib/XGGState.m: New method  
	[-compositeGState:fromRect:toPoint:op:fraction:] use this to
	implement [-compositeGState:fromRect:toPoint:op:] and
	[-dissolveGState:fromRect:toPoint:delta:]. 
	
2005-07-04  Adam Fedor  <fedor@gnu.org>

	* Documentation/news.texi: Update.

2005-07-01  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/Back.gsdoc,
	Documentation/Back/DefaultsSummary.gsdoc,
	Documentation/Back/WindowFocus.gsdoc,
	Headers/art/ARTContext.h,
	Headers/x11/XGDragView.h,
	Headers/xlib/XGFontSetFontInfo.h,
	Headers/xlib/XGGeometry.h,
	Source/x11/wrasterP.h,
	Source/xlib/XGFontSetFontInfo.m,
	Source/xlib/linking.m,
	Tools/GNUmakefile.postamble,
	Tools/GNUmakefile.preamble,
	Tools/gpbs.1: Add/fix copyright and licenses.

2005-06-17  Adam Fedor  <fedor@gnu.org>

	* Tools/gpbs.m ([PasteboardServer -connectionBecameInvalid:]): 
	Use isKindOfClass.

2005-06-07  Fred Kiefer <FredKiefer@gmx.de>

	* Source/winlib/Win32GState.m (GSCreateBitmap): Allow
	NSCalibratedRGBColorSpace as well.
	(-_compositeGState:fromRect:toPoint:op:fraction:) Removed the
	leading underscore of the method name.

2005-05-26  Adam Fedor  <fedor@gnu.org>

	* Update FSF Address.

2005-05-20  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Headers/xlib/XGGState.h, Source/xlib/XGGState.m: Changed
	HAVE_LIBXFT #ifdefs to HAVE_XFT.
	* configure.ac, config.h.in: Changed comments for HAVE_XFT to
	clarify that it is different from HAVE_LIBXFT (latter is just the
	runtime lib, while former implies a functional installation).

2005-05-14  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/xlib/XGGState.m: Added missing #ifdefs to last patch so
	compilation on non-libxft system is unaffected.

2005-05-12  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Headers/xlib/XGGState.h (xft_draw, xft_alpha_draw, xft_color,
	-xftDrawForDrawable, -xftColor): New ivars and methods for caching
	Xft (freetype) draw state.
	* Source/xlib/XGGState.m (-xftDrawForDrawable:, -xftColor): Cache
	Xft draw state.
	* Source/xlib/GSXftFontInfo.m: Use cached Xft draw state for rendering.

2005-04-20  Adam Fedor  <fedor@gnu.org>

	* Fonts/GNUmakefile.postamble: Make sure to install in 
	$(GNUSTEP_INSTALLATION_DIR).
	* GNUmakefile: Add check to not install fonts if fonts=no.
	Fixes bug #12749

2005-04-19  Adam Fedor  <fedor@gnu.org>

	* Source/art/path.m ([ARTGState -_stroke:]): Change floorf->floor.
	Fixes bug #12731.

2005-04-16  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGGState.m
	(-_compositeGState:sourcefromRect:fromRecttoPoint:toPointop:opfraction:]): 
	New way to compute drect. This fixes bug #12459.

2005-04-07  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m  (-iconSize): Use XFree to free
	xiconsize. Fixes bug #12578.

2005-04-04 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/winlib/WIN32GState.m: tunr on alpha blending and swap colors
	to correct format.

2005-04-01  Adam Fedor  <fedor@gnu.org>

	* Source/win32/WIN32Server.m: Re-add 2005-02-23 change.

	* Source/xlib/GSXftFontInfo.m (-setupAttributes): Make log message
	more verbose.

2005-04-01 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGDragView.m: Complete code changes to factor out as
	much as possible into the superclass and avoid duplication.

2005-03-30  Adam Fedor  <fedor@gnu.org>

	* Version 0.9.5

	* Headers/x11/XGDragView.h, Source/x11/XGDragView.m: Tag previous 
	version of file for release.
	* Source/win32/WIN32Server.m: Revert 2005-02-23 change for this release.

2005-03-29 Richard Frith-Macdonald <rfm@gnu.org>

	* Headers/x11/XGDragView.h: Make this a subclass of GSDragView
	* Source/x11/XGDragView.m: Rewrite to be a subclass of GSDragView
	so that bugfixes from it are in  XGDragView.  Remove lots of
	redundant code.  Still quite a bit to do.
	* Source/win32/WIN32Server.m: Add code to draw own window decorations
	and GSWIN32HandlesWindowDecorations user default to turn it off.
	Fixed code for detecting window at a screen point to ignore invisible
	windows (fixes crash in DnD).
	Altered window type to 'tool' for borderless windows, so that we don't
	get a button in the taskbar for every window we create.

2005-03-29  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/art/ftfont.h, Source/art/ftfont.m, Source/art/ftfont-old.m:
	Support DPSxshow, xyshow, ashow, widthshow, and awidthshow in same
	drawString:... method that was just implementing DPSshow, and drop
	the stub that was slated to handle the former methods.
	* Source/art/ARTContext.m: Use the methods defined above.

2005-03-28 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/win32/WIN32Server.m: fix for locating window at point.

2005-03-21  Adam Fedor  <fedor@gnu.org>

	* Source/art/blit.m (artcontext_setup_draw_info): Add mail address
	to log message.

2005-02-23  Luis Cabellos

	* Source/win32/WIN32Server.m: Use new run loop api under mingw32

2005-02-22  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Rewrite, avoid setting vars unecessarily. Use
	pkg-config if possible. Switch back to xlib/winlib when other backends
	don't satisfy dependancies.
	* config.make, config.h: Update to match.
	* GNUmakefile (SUBPROJECTS): Add Fonts
	* Fonts: New folder with default nfont

	* Source/x11/GNUmakefile: Remove unneeded file.

2005-02-12  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m  (-setalpha::): Support for window
	alpha handling on X servers that implement this.

2005-02-12 13:58  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/x11/XGServerWindow.h: Make the border and depth ivars
	unsigned.

2005-02-12 13:54  Alexander Malmberg  <alexander@malmberg.org>

	* Source/x11/XGServerWindow.m (setNormalHints): If the window isn't
	resizable, force the min and max sizes to be equal to the current
	size.
	(-placewindow::): Set the hints after updating xframe.

	Fixes bug #11713.

2005-02-10 00:50  Alexander Malmberg  <alexander@malmberg.org>

	* Tools/gpbs.m (init): Remove the program name from the arguments
	passed to the new task.

2005-02-08 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/gpbs.m: Use NSTask to re-execute as daemon.

2005-02-05 00:44  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (-_clip_add_svp:): Handle the case where
	no spans are generated for the path.

2005-01-31 07:30  Christian <christian@tenbyten.com>

	* Tools/gpbs.m: Correct missplaced bracket when built for windows.

2005-01-21 21:51  Alexander Malmberg  <alexander@malmberg.org>

	Various warning and whitespace cleanups.

	* Headers/x11/XGServerWindow.h,
 	* Source/art/ftfont.m,
	* Source/gsc/GSGState.m,
	* Source/win32/WIN32Server.m,
	* Source/x11/XGDragView.m,
	* Source/x11/XGServerEvent.m,
	* Source/x11/XGServerWindow.m: Change signedness of various
	variables.
	* Tools/gpbs.m: Add missing ctype.h include.
	* Source/x11/XGDrawView.m (-_setCursor): Initialize variables.

2005-01-20 22:39  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m (-initWithContextInfo:): Enable stroke
	adjusting for the default gstate.

2005-01-20 17:58  Alexander Malmberg  <alexander@malmberg.org>

	* Source/xlib/XGGState.m (-DPSrectstroke::::): Don't decrease
	the width/height.

2005-01-15  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/x11/XGServerEvent.m (-processEvent:): For XdndPosition
	event (ClientMessage), convert the point from root coordinates
	using XTranslateCoordinates() instead of relying on cached window
	position.  Update cached window position from this.

2005-01-12 00:32  Alexander Malmberg <alexander@malmberg.org>

	* Source/gsc/GSStreamContext.m (-DPSsetstrokeadjust:):
	Give 'setstrokeadjust' a boolean argument.

2005-01-11 21:57  Alexander Malmberg <alexander@malmberg.org>

	* Headers/x11/XWindowBuffer.h: Make the pending_rect ivar a struct
	of int:s.
	* Source/x11/XWindowBuffer.m: Add casts to remove pointer sign
	warnings.
	(-_exposeRect:, -_gotShmCompletion): Update uses of pending_rect.

2005-01-11 20:27  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ARTGState.h: Add strokeadjust ivar.
	* Source/art/ARTContext.m (-DPScurrentstrokeadjust)
	(-DPSsetstrokeadjust): Use the strokeadjust ivar.
	* Source/art/path.m (-DPSrectclip::::): Don't use the optimized
	path if the clipping path is complex.
	(-_stroke::): Remove second argument, rename to ...
	(-_stroke:): ... this. If strokeadjust is active, adjust the path
	to make it clearer.
	(-DPSrectstroke::::): Update _stroke::: call. Remove dash adjustment
	code.
	(-DPSstroke): Update _stroke:: call.
	* Source/art/composite.m: Fix comment typo. Remove some old
	debugging code.

2005-01-11 16:15  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/blit.m: Remove #warning:s.
	* Source/art/blit_scrapheap.m: Add mmx implementation of 15/16bpp
	blit_alpha_opaque.

2005-01-11 16:01  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Copy old contents to ftfont-old.m and
	include that file if the freetype version is <2.1.8. Rewrite
	this file to work with freetype >=2.1.8.
	* Source/art/ftfont-old.m: New file.

2004-12-30 18:38 Gregory John Casamento <greg_casamento@yahoo.com>

	* Source/x11/XGDragView.m: _handleDrag: method correction for
	bug#11352 and for fixes to allow compilation with gcc < 3.0.

2004-12-09  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m  (-standardcursor:): Don't set
	default cursor, when no standard cursor is available.
	* Source/x11/XGServerWindow.m  (-standardcursor:): Don't set
	default cursor, when no standard cursor is available.
	Replaced the usage of the type xgps_cursor_id_t with Cursor
	throughout this file.

2004-12-06  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m  (-setwindowlevel::): Stop using
	the KDE override atom for window levels. The old behaviour may be
	reactivated via the define USE_KDE_OVERRIDE.

2004-11-28  Matt Rice <ratmice@yahoo.com>

	* Source/x11/XGGLFormat.m (-initWithAttributes:,append,append1): Add 
	missing curly brackets, fix append and append1 macros so they can safely
	be used without curly brackets.
	
2004-11-28 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/gpbs.m: When run as daemon, re-execute with --no-fork flag
	so that we can work with threading using pth library (default on
	some BSD versions).

2004-11-10 18:41  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m (test_xshm): New function.
	(test_xshm_error_handler): New function.
	(+windowBufferForWindow:depthInfo:): Move XShm detection code
	to test_xshm and use it to decide whether to use XShm or not.
	(+initialize): Move use_xshm setting code to test_xshm.
	(+_gotShmCompletion:): Don't warn if we can't find an XWindowBuffer
	for the event.

2004-11-10  Matt Rice <ratmice@yahoo.com>

	* Source/x11/XGServerWindow.m (-iconSize): Implement new method.
	(-iconTileImage:): ditto.

2004-11-09 22:42  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGBitmapImageRep.m: Remove dead file.
	* Source/x11/GNUmakefile: Remove reference.

2004-11-09 22:15  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (fix_path): Don't prepend the path to absolute
	file names.
	(-initWithFontName:matrix:screenFont:): Initialize cachedGlyph.
	(-advancementForGlyph:): Handle NSNullGlyph.
	(-glyphForCharacter:): Return NSNullGlyph if there's no glyph for
	the character.

2004-11-09 19:00  Alexander Malmberg <alexander@malmberg.org>

	* Tools/gpbs.m (main): If we get a -GSStartupNotification argument,
	post the notification after initializing. Fixes bug #10876.

2004-11-04  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/x11/XGServerEvent.m (process_key_event): Modifier detection:
	If default "GSModifiersAreKeys" is YES, ignore 'shift' and/or other
	state and just map keypress to first modifier for they key.
	* Documentation/Back/DefaultsSummary.gsdoc: Document new default
	"GSModifiersAreKeys".
	* Source/xlib/XGBitmap.m (_bitmap_combine_alpha()): corrected typo
	in error message.

2004-10-30  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGContext.m  (+initializeBackend): Use anti-aliaesd
	fonts when available and not specified otherwise.
	* Documentation/Back/DefaultsSummary.gsdoc: Document that AA fonts
	are now the default for xlib.

2004-09-28  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerEvent.m (initialize_keyboard): Corrected typo
	reported by Benhur Stein <benhur.stein@gmail.com>.

2004-09-24  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/x11/XGServerEvent.m: Improvement of earlier update to
	determine modifiers from KeySyms rather than KeyCodes: in
	process_key_event, KeySym is now looked up taking shift/compose
	modifier state into account, while in handling of KeyMapNotify in
	processEvent: this state is also considered in the majority of cases.
	Base on suggestions by Kazunobu Kuriyama (kazunobu.kuriyama@nifty.com).

2004-09-23  Adam Fedor  <fedor@gnu.org>

	* Version 0.9.4
	
	* Documentation/news.texi: Update

2004-09-21 19:19  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Add lineHeight ivar to FTFontInfo.
 	(+defaultLineHeightForFont): Implement.
	(-initWithFontName:matrix:screenFont:): Set lineHeight.

2004-09-19  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m: Added missing include for new Cygwin
	event pooling.

2004-09-17  Fred Kiefer <FredKiefer@gmx.de>

	* Source/winlib/Win32GState.m (-_compositeGState:...fraction:):
	Made the use of AlphaBlend depend on a define, which by default is missing.

2004-09-09  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/xpbs.m (-[XPbOwner getSelectionData:type:], -[XPbOwner
	xProvideSelection:]): Removed some compiler warnings.
	* Source/cairo/CairoGState.m (-DPSimage:...:): Slightly improved.
	(-compositeGState:fromRect:toPoint:op:fraction:) New method 
	(-compositeGState:fromRect:toPoint:op:,
	-dissolveGState:fromRect:toPoint:delta:) Implemented via new method.
	Added all missing colour conversions.
	(GSShowGlyphs::) Use new method on CairoFontInfo.
	* Header/cairo/CairoFontInfo.h (-drawGlyphs:length:on:atX:y:) New method.
	* Source/cairo/CairoFontInfo.m (-drawGlyphs:length:on:atX:y:) New method.
	Moved some includes from header to here, extracted method
	[setupAttributes] and other cleanup. 
	
2004-09-08  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGServer.h: Add 8bit fast drawing.	
	* Source/x11/XGServer.m ([XGScreenContext
	-initForDisplay:screen:]): For 8bit, test for RGB_BEST_MAP.
	* Source/xlib/XGBitmap.m (_pixmap_combine_alpha, 
	_bitmap_combine_alpha, _pixmap_read_alpha): Add 8 bit case.
	(patch from Paul Secchia <paul@worldnet.att.net>).

	* Documentation/Back/DefaultsSummary.gsdoc: Document it.

	* Documentation/news.texi: Update for new release.

2004-09-05 00:05  Alexander Malmberg <alexander@malmberg.org>

	* Tools/GNUmakefile.preamble: Compile with -Wall.
	* Tools/xpbs.m: Rename to +initializePasteboard. Return NO iff
	XOpenDisplay fails.
	* Tools/win32pbs.m (+initialize): Rename to +initializePasteboard.
	Return YES.
	* Tools/gpbs.m ([PasteboardServer -init]): Call	+initializePasteboard
	instead of +class. Set xPbClass to nil if the call fails.

2004-09-01  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Prepend don't overwrite CFLAGS and LDFLAGS given
	in environment.

2004-08-31  Adrian Robert <arobert@cogsci.ucsd.edu>

	* Source/x11/XGServerEvent.m: Changed mapping of GNUstep modifier
	keys to X11 KeySyms instead of KeyCodes.  (Added check_key(); updated
	check_modifier(), -processEvent: (KeyMapNotify), changed
	default_key_code() to key_sym_from_defaults(), updated
	initialize_keyboard().)
	
2004-08-30  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/GSXftFontInfo.m: Changed usage of CString for font
	name and family into UTF8String for XFT. Patch by Yen-Ju Chen
	<yjchenx@hotmail.com>.
	
2004-08-24  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m (-windowbounds:): Corrected variable
	name, so the fiel compiles again.
	(-setupRunLoopInputSourcesForMode:): Added new event polling code
	for Cygwin.
	* Source/cairo/CairoContext.m (-NSReadPixel:, beep): Removed methods.
	
2004-08-23  Fred Kiefer <FredKiefer@gmx.de>

	* Source/cairo/CairoContext.m (-DPScurrentalpha:,
	-DPSsetoffset::): Removed methods.
	* Source/cairo/CairoGState.m (-offset, -setoffset:): Added methods.
	(-forwardInvocation:): Improved output.
	(-GSSetDevice:::) Commented out NSLog calls.
	* Source/gsc/GSGState.m (-_showString:lenght:): Removed this
	method which was a left over from last patch. 
	
2004-08-09 14:38  Alexander Malmberg <alexander@malmberg.org>

	* Source/win32/WIN32Server.m, Source/win32/WIN32ServerEvent.m,
	Headers/win32/WIN32Geometry.h (MSScreenRectToGS, GSScreenRectToMS):
	The 'GS' rect is, in the terminology of NSWindow.h, the window frame,
	not the screen frame. make the conversions match this and update
	the callers.
	* Source/x11/XGServerWindow.m (-_OSFrameToXFrame:for:,
	-_OSFrameToXHints:for:, -_XFrameToOSFrame:for:): Update conversions.
	(-windowdevice:): Remove artificial delays and geometry querying.
	Update based on the frame from the last ConfigureNotify.
	(-placewindow::): Remove event coordinate adjustments. Always send
	move/resize events to -gui right away.

2004-08-03  Fred Kiefer <FredKiefer@gmx.de>

	* Header/cairo/*:
	* Source/cairo/*:
	* Source/GSBackend.m:
	* configure.ac:
	* configure:
	Added cairo backend from Banlu Kemiyatorn <object@gmail.com>.
	
2004-07-30 15:52  Alexander Malmberg <alexander@malmberg.org>

	* Headers/gsc/GSCStateOps.h, Source/gsc/GSContext.m,
	Source/gsc/GSGState.m (-GSReadRect:): New method.

	* Source/art/GNUmakefile: Add ReadRect.m.
	* Source/art/ReadRect.m: New file.
	* Source/art/blit.m, Source/art/blit.h: Add read_pixels_a and
	read_pixels_o. Fix spurious low bits in BLEAN_READ for 16bpp and
	15bpp modes.

	* Source/xlib/XGContext.m (-GSReadRect:): Remove.
	* Source/xlib/XGGState.m (-GSReadRect:): Update key names and set all
	keys even if the rectangle is degenerate. Return nil if the image
	can't be read. Set the Matrix key.

2004-07-26 15:37  Matt Rice <ratmice@yahoo.com>
		  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGServerWindow.m (-_createAppIconPixmaps): New method.
	(-orderwindow:::): Use -_createAppIconPixmaps to set IconPixmapHint
	if we're using windowmaker.

2004-07-14  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/Standards.txt: update.

2004-07-13 03:11  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/shfill.m (function_setup, -DPSshfill:): NSDebugLLog
	helpful error messages if something was wrong in the shader
	dictionary.

2004-07-09  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/Standards.txt: New EWMH file.

2004-07-06  Fred Kiefer <FredKiefer@gmx.de>

	* Source/winlib/Win32GState.m (-_compositeGState:...fraction:):
	Applied alpha blending patch by MA Garcias <lists@tragnarion.com>.
	Disabled GDI_WIDELINE_BEZIERPATH_BUG.
	* configure.ac: Added test for msimg32, needed for AlphaBlend.
	* configure: Regenerated.
	* Source/xlib/XGGState.m: Moved additional show methods to super class.
	* Source/gsc/GSGState.m: Implemented additional show methods based
	on (-showGlyphs::) and simple glyph conversion.
	
2004-06-19  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m (-standardcursor::): Added more
	standard cursors.
	* Source/win32/WIN32Server.m (-standardcursor::): Added more
	standard cursors.

2004-06-28 00:45  Alexander Malmberg <alexander@malmberg.org>

	* Headers/x11/XGServerWindow.h: Add buffer_width and buffer_height
	ivars.
	* Source/x11/XGServerWindow.m (-windowdevice:): Use buffer_width and
	buffer_height instead of xframe to keep track of the size of the
	buffer and alpha_buffer.

2004-06-28 00:41  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/XGGState.m (-setWindowDevice:): Remove use of
	cast-as-lvalue.

2004-06-26 13:04  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGServerEvent.m (-processEvent: ConfigureNotify):
	Don't ignore the event for unmapped windows. Use XTranslateCoordinates
	to get the size and position right for both real and artificial
	events. Only update the position hints if we're mapped.

	* Source/x11/XGServerWindow.m: Add handlesWindowDecorations variable.
	(-handlesWindowDecorations): New method.
	(setWindowHintsForStyle, -styleoffsets:::::): If we aren't handling
	window decorations, treat all windows as borderless.
	(-stylewindow::, -setinputstate::): Assert that we're handling window
	decorations.
	(-window::::): Create the window structure earlier so it can be used
	to convert frames.
	(-_setupRootWindow): Set handlesWindowDecorations based on the
	GSX11HandlesWindowDecorations defaults value.

	* Documentation/Back/DefaultsSummary.gsdoc: Document
	GSX11HandlesWindowDecorations.

2004-06-19  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m (-findWindowAt:windowRef:excluding:)
	New method for D&D. (-dragInfo), (-slideImage:from:to:) Removed.

2004-06-11  Adam Fedor  <fedor@gnu.org>

	* Version 0.9.3
	* Documentation/news.texi: Update.

	* configure.ac: Remove WindowMaker/libwraster check

2004-05-27  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32ServerEvent.m (-windowEventProc:::) Added
	handling of size and move events and extracted end of resize event
	handling into the same new method. PAINT now always validates the
	whole window.
	Patch by MA Garcias <lists@tragnarion.com>.
	New method [-resizeBackingStoreFor:] used for end of resize events.

2004-05-13 17:11  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (-advancementForGlyph:): Return a zero size for
	control glyphs.

	(-positionOfGlyph:precededByGlyph:isNominal:): Check if either glyph
	is a control glyph before converting to freetype glyph indices.

2004-05-12  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/win32/WIN32Geometry.h: (GSWindowOriginToMS) corrected computation.
	* Source/win32/WIN32Server.m (-orderwindow:::) Removed obsolte
	"return" in non-NSWindowOut case and use flag SWP_NOACTIVATE.
	(-placewindow::, -movewindow::) Don't use flag SWP_NOREDRAW.
	Patch by MA Garcias <lists@tragnarion.com>.
	* Source/win32/WIN32ServerEvent.m Corrected definition of the
	GET_X_LPARAM and GET_Y_LPARAM macros.
	
2004-03-30 01:49  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGGLFormat.m (-initWithAttributes:): Fix handling of
	15bpp and 16bpp modes (NSOpenGLPFAAccumSize).

2004-02-29 21:42  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.h, Source/art/ftfont.m: Add
	-drawGlyphs::at::to::::::alpha::color::::transform:drawinfo: method.

	* Source/art/ARTContext.m (-GSShowGlyphs::): Use it if the
	destination window has an alpha buffer.

	(-initWithContextInfo:): Try to find a DirectColor or TrueColor
	visual before falling back on the default visual.

2004-02-28  Adam Fedor  <fedor@gnu.org>

	* Version 0.9.2

2004-02-28  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m (-setupRunLoopInputSourcesForMode:): 
	Use a shorte timer interval.

2004-02-24 15:45  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/image.m: Add support for grayscale, one-is-black
	color spaces.
	(_image_get_color_rgb_cmyk_gray): Invert gray value if one is black.
	(-DPSimage:::::::::::): If the color space is NSDeviceBlackColorSpace
	or NSCalibratedColorSpace, treat one as black.

2004-02-17  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -orderwindow:::]): Don't
	try to raise the root window.

2004-02-08 23:20  Gregory John Casamento <greg_casamento@yahoo.com>

	* Source/xlib/XGGState.m: Added necessary calibrated
	colorspaces to the DPSimage: method.
	
2004-02-04 01:48  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGServerEvent.m: Remove uses of the now deprecated
	"casts as lvalues" gcc extension.

2004-01-27  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/DefaultsSummary.gsdoc: Fix doc markup
	* Documentation/Back/GNUmakefile: Change install location.

2004-01-25  Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/shfill.m (-DPSshfill:):
	* Source/winlib/Win32GState.m (-DPSimage::::):
	* Source/xlib/XGGState.m (-DPSimage::::): Replaced
	appendTransform: with prependTransform:. 
	* Source/art/image.m (-DPSimage:): Replaced prependTransform: with
	appendTransform:. 

2004-01-25 13:52  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/image.m (-_image_do_rgb_transform:::): Fix off-by-one
	error in horizontal clipping.

2004-01-10  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check if XShm is really implemented (it isn't on
	Cygwin even though the headers are there).
	* Source/x11/XGServerEvent.m ([XGServer -processEvent:event]): 
	ifdef around XShm call.

2004-01-10  Adam Fedor  <fedor@gnu.org>

	* Prevent orderwindow:relativeTo: from making a window key.
	* Headers/x11/XGGeneric.h: Add Ivar.
	* Source/x11/XGServerEvent.m (-_handleTakeFocusAtom:forContext:): 
	Don't take focus if we ordered this window previously.

	* Source/x11/XGServerWindow.m ([XGServer -orderwindow:::]): 
	Set desiredOrderWindow.
	([XGServer -setinputfocus:]): Reset it.

2004-01-10  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -orderwindow:::]): 
	When otherWin == 0, make sure the window does not go in front
	of the current key window.

	* Source/win32/WIN32Server.m ([WIN -orderwindow:op:otherWin:winNum]): 
	Allow otherWin < 0.

2004-01-10 16:25  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/blit.m: Replace uses DI_16_B5G5R5A1 and DI_16_B5G6R5
	with uses of DI_16_B5_G5_R5_A1 and DI_16_B5_G6_R5.
	(sover_ao): Add an optimized version for the 16/15 bpp modes.
	(satop_aa): Simplify calculation of da'.
	(datop_aa): Simplify calculation of da'. Fix the rounding.
	(xor_aa): Fix the rounding.
	(DI_16_B5_G5_R5_A1, DI_16_B5_G6_R5): Unpack pixels in a more
	efficient way.

	* Source/art/blit_scrapheap.m: New file.

2004-01-07 14:51  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/composite.m (-_composite_func::::::): If the source has
	alpha, the destination is opaque, and the operator is NSCompositeCopy,
	set dst_needs_alpha to YES.

	(-compositerect:op:): If alpha is needed, make sure alpha is always
	created _before_ setting up the alpha destination pointers. Only
	write alpha for NSCompositeCopy if the current color isn't opaque.

2004-01-07  Fred Kiefer <FredKiefer@gmx.de>

	Added missing .cvsignore files and extended the existing ones.
	
2003-12-31  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/win32pbs.m New file to handle windows clipboard
	interaction.
	* Tools/GNUmakefile
	Compile new file for windows backend.
	* Tools/gpbs.m (PasteboardServer -init) for windows backends use
	Win32PbOwner as the pasteboard owner class.	
	
2003-12-30  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/path.m (-GSSendBezierPath:) preset the count
	variable, as this is expected by the method [NSBezierPath
	getLineDash:count:phase:]. 
	* Source/xlib/XGGState.m (-_doPath::draw:) allways set fill rule
	for path_fill.

2003-12-30  Fred Kiefer <FredKiefer@gmx.de>

	* Source/art/path.m (-DPSrectstroke::::,
	-_axis_rectangle::::vpath:axis::::pixel:): Adopted to change in 
	NSAffineTransform.h. 

2003-12-28  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m (initWithAttributes:): Adjusted
	spelling of useWMTaskBar to header, to get it compile.

2003-12-26  Adam Fedor  <fedor@gnu.org>

	* Focus fixes.
	* Headers/win32/WIN32Server.h: Add flags ivar
	* Source/win32/WIN32Server.m (orderwindow:::): If useWMTaskBar
	flag set, don't show app icon and don't order out menu window.
	* Source/win32/WIN32ServerEvent.m (windowEventProc:::): 
	On activation message, activate app, on deactivation message,
	deactivate app (if message comes from menu window).

2003-12-25  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m (-_initWin32Context) set a default
	cursor, which is used each time the window is entered.

2003-12-23  Fred Kiefer <FredKiefer@gmx.de>

	* Source/winlib/WIN32GState.m (-copyBits:fromRect:toPoint:): Made
	save against self and source being the same object and corrected
	computation for flipped views. This code is copied over from xlib.
	* Source/winlib/WIN32FontEnumerator.m Reimplemented the whole file.
	* Source/winlib/WIN32FontInfo.m (-setupAttributes) assign font
	family ivar and use common functions with font enumerator.
	* Source/win32/WIN32ServerEvent.m (WIN32Server
	-windowEventProc::::) flag that we handle erasing of the
	background ourselves. (invalidateWindow) copy from backing store
	if possible.

2003-12-03  Adam Fedor  <fedor@gnu.org>

	* Headers/win32/WIN32Server.h: Add ivars currentFocus, desiredFocus.
	* Source/win32/WIN32Server.m (setinputfocus:): Don't set if window
	already has focus
	* Source/win32/WIN32ServerEvent.m (-windowEventProc::::): Main
	event handler.
	(mainWindowProc): Call -windowEventProc::::.
	(-handleGotFocus:): Handle main/key directly without sending event
	to frontend.

2003-12-02  Adam Fedor  <fedor@gnu.org>

	* Source/win32/WIN32Server.m: Add a bunch of DebugLLog
	statements (WTrace, NSEvent, Focus).  Move event functions to...
	* Source/win32/WIN32ServerEvent.m: here.

2003-12-02 Leigh Smith   <leigh@bogus.example.com>

	* Source/winlib/WIN32GState.m ([WIN -_paintPath:drawType]):
	Corrected bug in Bezier curves, a bug in line widths and adds a
	workaround for a Windows GDI drawing bug when drawing curved wide
	lines.

2003-11-25 20:12  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGServerEvent.m (initialize_keyboard): Make sure that
	no _*_keycodes contains the same keycode twice.

2003-11-25 12:09  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m ([FTFontInfo_subpixel
	-drawGlyphs::at::to::::::color::::transform:drawinfo:): If freetype
	is sufficiently new, use its LCD subpixel support instead of scaling
	manually.

2003-11-23  Adam Fedor  <fedor@gnu.org>

	* Version 0.9.1

2003-11-23  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerEvent.m (process_modifier_flags()) treat caps
	lock as alpha shift and not as shift modifier. 

2003-11-20  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGBitmap.m (_pixmap_combine_alpha): Use RGetClosestXColor
	to get colors on 8bit displays.
	(_bitmap_combine_alpha): Likewise. Fixes PR #6341

2003-11-19  Benhur Stein <benhur@inf.ufsm.br>

	* Source/x11/XGServerEvent.m ([XGServer -processEvent:event]): Correct
	off-by-one error.

2003-11-19  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServer.m: Add some docs.

	* Window focus fixes.
	* Source/x11/XGServerEvent.m ([XGServer -processEvent:event]): Move
	take focus code...
	([XGServer -_handleTakeFocusAtom:forContext:]):  ...to here. Check for
	common problems before passing event to frontend.
	([XGServer -processEvent:event])(FocusOut): Invalidate current
	focus window and focus request.

2003-11-18 16:57  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Remove fallback ivar. Add advancementImgd
	and a simple glyph size cache for use in -advancementForGlyph:.

	(-initWithFontName:matrix:screenFont:): Set up advancementImgd.
	(-advancementForGlyph:): Use advancementImgd instead of setting up
	a FTC_ImageTypeRec on each call. Cache glyph sizes to avoid expensive
	freetype calls.

2003-11-05  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer -processEvent:]): New
	method broken off from -receivedEvent:type:extra:forMode:.

2003-11-05 03:29  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGServerEvent.m (-receivedEvent:type:extra:forMode:):
	Casts as lvalues will be deprecated in gcc 3.4. Thus, don't assign
	to the cWin macro. Reported by Lyndon Tremblay.

2003-11-02 02:58  Alexander Malmberg <alexander@malmberg.org>

	* Source/gsc/GSStreamContext.m Whitespace cleanups.

	(writeHex): Use index properly; don't always write the first byte.
	Use fputc() instead of fprintf() (was doing the hex conversion
	manually anyway, might as well make it efficient).

2003-11-02 02:27  Alexander Malmberg <alexander@malmberg.org>

	* Source/gsc/GSStreamContext.m (fpfloat, writeHex): Make static.

2003-10-29  Yen-Ju Chen <yjchenx@hotmail.com>

	* Source/x11/XGServerWindow.m ([XGServer -_setupRootWindow]): Always
	set WindowMaker app icon property
	([XGServer -window::::]): Idem for GNUstep window styles.
	([XGServer -stylewindow::win]): Idem.
	([XGServer -docedited::win]): Idem.
	([XGServer -setwindowlevel::]): Idem.

2003-10-22  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check for X11 function prototypes (Fixes problems
	on Solaris 2.6).

2003-10-20 20:09  Alexander Malmberg <alexander@malmberg.org>

	* Tools/xpbs.m (-xProvideSelection:): Copy all characters and the
	terminating nul in XG_COMPOUND_TEXT handling.

2003-10-20 16:20  Alexander Malmberg <alexander@malmberg.org>

	* Tools/xpbs.m (+xSelectionNotify:): Don't call XGetAtomName()
	if the property is None.

2003-10-19  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGBitmap.m: Cache color lookup to reduce use
	of XQueryColor (based on code from Marko Riedel).

	* configure.ac: Add 2.57 prereq

2003-10-15  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Don't look for jpeg/tiff (already linked in by gui).

2003-10-08 15:58  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/XGContext.m (+initializeBackend): Give NSLog an
	objective-c string (@""), not a c string (""). Reported by Matt
	Rice.

2003-10-05  Adam Fedor  <fedor@gnu.org>

	* Documentation/GNUmakefile: Make Back documentation
	* Documentation/Back/GNUmakefile: Set DocumentationDirectory.

	* Source/x11/raster.c (RMakeCenteredImage): Remove (unused).

2003-10-04 14:27  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/path.m (-DPSrectclip::::): Move the call to -DPSnewpath
	so it gets called on all paths through the method.

2003-10-03  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Use -Wl for netbsd linker options.

2003-10-02  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGGState.m (-DPSrectclip::::): Clear path.
	* Source/winlib/WIN32GState.m (-DPSrectclip::::): Idem.
	* Source/art/path.m (-DPSrectclip::::): Idem.

2003-09-30  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSGState.m ([GSGState -DPSrectclip::::]): Clear
	the current path after clipping.

2003-09-29  Adam Fedor  <fedor@gnu.org>

	* Version 0.9.0

2003-09-22 13:03  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/image.m (-_image_do_rgb_transform:::): Check if the
	coordinates involved are too large to handle normally. If they
	are, scale down the numbers a bit (gives less accuracy, but no
	overflow).

2003-09-20  Adam Fedor  <fedor@gnu.org>

	* Headers/xlib/XGGState.h: Add GSReadRect def.
	* Headers/xlib/XGPrivate.h: Add _pixmap_read_alpha def.
	* Source/xlib/XGBitmap.m (_pixmap_read_alpha): Implement.
	* Source/xlib/XGGstate.m (-GSReadRect:): Idem.

2003-09-15  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSGState.m ([GSGState -deepen]): Typo fix - copy
	textCtm (reported by Banlu Kemiyatorn <id@project-ile.net>).

2003-09-09  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSContext.m (-DPSsetgstate:): Copy gstate so we
	don't modify original.

2003-09-08 01:39  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/blit.m (artcontext_setup_draw_info): Add some debug
	logging.

2003-09-03  Adam Fedor  <fedor@gnu.org>

	* Source/xdps/GNUmakefile: include config.make (patch from
	Aredridel <aredridel@nbtsc.org>).

2003-09-02  Adam Fedor  <fedor@gnu.org>

	* Tools/gpbs.m (init): Don't mess with file descriptors on MinGW.

2003-09-02  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/xpbs.m
	Made all calls to XGetAtomName() free their memory later on.
	Removed function osTypeToX(). Extracted method
	[getSelectionData:type:] from [xSelectionNotify:]. 
	[xSelectionNotify:] now supports incremental data transfer and is
	save against failing string conversions. Complete rewrite of
	[xProvideSelection:] to better follow the ICCCM
	specification. This now implements TIMESTAMP, MULTIPLE and
	COMPOUND_TEXT (all untested!)
	
2003-08-31  Adam Fedor  <fedor@gnu.org>

	* Tools/gpbs.m (init): Close file descriptors so gpbs can be a proper
	daemon.

2003-08-26  Adam Fedor  <fedor@gnu.org>

	* Version 0.8.9

2003-08-19  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/xpbs.m
	Made some of the NSLog messages	more explicit on what did go wrong.

2003-08-17  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/gpbs.m
	[PasteboardServer init] made sure that class XPbOwner gets
	initialized, by adding a dummy call to class.
	* Tools/xpbs.m
	[XPbOwner requestData:] added loop to get data of size bigger that 32K
	bytes. [XPbOwner pasteboard:provideDataForType:] and
	[XPbOwner pasteboardChangedOwner:] removed the remaining ifdef tests for
	X_HAVE_UTF8_STRING. Removed function xTypeToOs() as this was not used.

2003-08-16  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGFontManager.m 
	In load_cache() enclosed loading of archive in exception handling and
	removed the writing of the archive previously done to update the format.

2003-08-05  Martin Brecher <martin@mb-itconsulting.com>

	* Tools/gpbs.1: Updated, fixed typos, added BUGS and HISTORY
	section, file is now unprocessed as it should be.

2003-08-10 23:26  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Override the new default font name methods.
	Log the glyph when logging FTC_SBitCache_Lookup errors.

2003-08-09  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/xpbs.m
	Reworked the X interaction so that both STRING and UTF8_STRING are
	supported both ways. 
	
2003-08-08  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/xpbs.m
	[XPbOwner initialize] switched the usage of PRIMARY and CLIPBOARD.
	* Documentation/Back/DefaultsSummary.gsdoc
	Add new GSOldClipboard deafult.	

2003-08-02  Kazunobu Kuriyama  <kazunobu.kuriyama@nifty.com>

	* Tools/xpbs.m: Multi-lingual cut & paste support

2003-08-02 13:29  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XGServer.m (-dealloc): Only use the rcontext freeing
	hack when using our own wraster.

2003-08-01  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Move freetype check before Xft check and
	fix up flags.

2003-07-30  David Ayers  <d.ayers@inode.at>

	* Created tag 'pre-header-reorg-20030731'.

	* Source/art/GNUmakefile: Do not make headers publilc.
	* Source/gsc/GNUmakefile: Ditto.
	* Source/x11/GNUmakefile: Ditto.
	* Source/xdps/GNUmakefile: Ditto.
	* Source/xlib/GNUmakefile: Ditto.

	* Headers/win32/*.h: Update includes for new header structure.
	* Headers/winlib/*.h: Ditto.
	* Headers/x11/XGServer.h: Ditto.
	* Headers/xlib/*.h: Ditto.
	
	* Source/art/ftfont.m: Ditto.
	* Source/gsc/*.m: Ditto.
	* Source/x11/*.m: Ditto.
	* Source/xdps/*.m: Ditto.
	* Source/xlib/*.m: Ditto.

	* Tools/gpbs.m: Ditto.

2003-07-26  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServer.m
	In [XGScreenContext dealloc] free hermes_data of RContext.

2003-07-26  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	In [GSCurrentCTM] autorelease the returned value.

2003-07-23  Adam Fedor  <fedor@gnu.org>

	* Version 0.8.8

2003-07-22  Kazunobu Kuriyama <kazunobu.kuriyama@nifty.com>

	* Headers/xlib/XGFontSetFontInfo.h: New file.
	* Source/xlib/XGFontSetFontInfo.m: New file.
	* Source/xlib/XGContext.m:
	([XGContext +initializeBackend]): Modified to use XGFontSetFontInfo. 
	* Source/xlib/GNUmakefile: Modified to include XGFontSetFontInfo.m.

2003-07-22  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGOpenGL.h (GSglxMinorVersion): New

	* Source/x11/XGGLContext.m (+clearCurrentContext): Use it to call
	correct function.
	(-initWithFormat:shareContext:, makeCurrentContext): Idem.
	* Source/x11/XGGLFormat.m ([ XGGLPixelFormat -getValues:
        forAttribute:forVirtualScreen:]): Idem.
	(initWithAttributes:): Idem. 
	(Patch from Damien Genet with some changes).
	
2003-07-21  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/DefaultsSummary.gsdoc: Add new
	GSXIMInputMethodStyle deafult (Adam Fedor).

	* Source/x11/context.c, StdCmp.c, convert.c, raster.c, scale.c:
	Updated to 0.80.2 version

2003-07-13  Kazunobu Kuriyama <kazunobu.kuriyama@nifty.com>

	* Header/x11/XGInputServer.h: Add the new category InputMethod.
	* Header/x11/XGServer.h: Add the new category InputMethod.
	* Source/x11/XIMInputServer.m:
	([XIMInputServer (XIMPrivate) -ximStyleInit]): Cover the input
	method styles RootWindow, OffTheSpot, OverTheSpot, and OnTheSpot.
	([XIMInputServer (XIMPrivate) -ximCreateIC:]): Implement OffTheSpot
	and OverTheSpot.  Implement the category InputMethod.
	* Source/x11/XGServer.m: Implement the category InputMethod.  Add
	overriding methods to NSTextView (NSView (InputMethod)).

2003-07-27 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/gpbs.m: Use protocols
	* Source/x11/XGServerWindow.m: Use UTF8String rather than cString
	to avoid crashes using non-ascii strings ... is this right?

2003-07-16  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServer.m
	Added [XGScreenContext dealloc] to clean up RContext.
	* Source/x11/XGServerWindow.m
	[_checkWindowManager] better clean up of memory.
	[_setupRootWindow] and [titlewindow::] free the value of the
	XTextProperty. 
	
2003-07-16  Fred Kiefer <FredKiefer@gmx.de>

	* Tools/xpbs.m
	[XPbOwner xSelectionNotify:] and [XPbOwner xProvideSelection:]
	explicit conversion of transferd strings from/to
	NSISOLatin1StringEncoding.
	
2003-07-05  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/DefaultsSummary.gsdoc: New file.

	* Tools/gpbs.1: Unziped
	* Tools/GNUmakefile.postamble: gzip man files.

	* configure.ac: Add openbsd flags like freebsd.

2003-07-06  Fred Kiefer <FredKiefer@gmx.de>

	* Header/x11/XGGeneric.m
	Added some new Atoms to structure XGWMWinTypes.
	* Source/x11/XGServerWindow.m
	[_checkWindowManager] initializes the new atoms. In
	[setwindowlevel::] changed the EWMH case, so that it works 
	correctly with KDE 3.1. There we used to have borders on menu windows.
	
2003-07-05 14:05  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Handle freetype <=2.1.2 in the error
	reporting.

2003-07-03 22:03  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Give more information when reporting
	FTC_SBitCache_Lookup() errors.

2003-07-02 17:28  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (-initWithFontName:matrix:screenFont:):
	Return nil if it's not a valid font.

2003-07-01 16:37  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Use the correct set of flags when loading
	glyphs for freetype >=2.1.3. Anti-alias by default if there is no
	defaults value for GSFontAntiAlias.

2003-06-30 18:11  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/XGFont.m (-xCharStructForGlyph:):	Don't try to treat
	NSGlyph pointers as unichar pointers; break on non-little-endian
	systems.

2003-06-29 17:34  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (-initWithFontName:matrix:screenFont:): Round
	the matrix entries for screen fonts to integers to get consistent
	handling of non-integer sized screen fonts.

2003-06-28 15:27  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Use a specific table when translating
	face names. Add a list of standard face names so make_strings can
	generate .strings files.

	* Source/GNUmakefile: Add nfontFaceNames.strings to the list of
	localized resources. Set the language list to English and Swedish.

	* Source/GNUmakefile.preamble: Add a quick hack to make make_strings
	pick up the .m files in all subprojects.

	* Source/English.lproj/nfontFaceNames.strings,
	Source/Swedish.lproj/nfontFaceNames.strings: Add English (dummy) and
	Swedish translations of the nfont face names.

2003-06-27 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/gpbs.m: Removed unused methods no longer in protocol.

2003-06-25  Adam Fedor  <fedor@gnu.org>

	* Tools/gpbs.1.gz: New file (from Martin Brecher).
	* Tools/GNUmakefile.postamble (after-install): Install it.

2003-06-26 00:33  Alexander Malmberg <alexander@malmberg.org>

	* Source/ftfont.m (-_generateGlyphsForRun:at:): Add (experimental)
	handling of utf16 to glyph generation so planes beyond the BMP can
	be used.

2003-06-20  Adam Fedor  <fedor@gnu.org>

	* Version 0.8.7

2003-06-17 20:07  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/composite.m, Source/art/ftfont.m, Source/art/path.m:
	Minor cleanups.

2003-06-17  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSStreamContext.m (GSShowGlyphs::, output:length:)
	Removed compiler warnings about signed/unsigned comparision. 
	Declared the extension method [GSFontInfo nameOfGlyph:].
	In [NSDrawBitmap:::::::::::] initiliale variable alpha to stop the
	compiler from complaining.
	* Source/x11/xdnd.c (xdnd_is_dnd_aware(), xdnd_get_type_list)
	Removed compiler warnings about signed/unsigned comparision. 
	* Header/x11/XGGeneric.h 
	Made ivar focusRequestNumber unsigned.
	* Source/x11/XGServerEvent.m (receivedEvent:type:extra:forMode:)
	Removed compiler warnings about signed/unsigned comparision.
	[receivedEvent:type:extra:forMode:] initialiase deltaY in all
	cases.
	* Source/x11/XGServerWindow.m (PropGetCheckProperty(),
	_setupRootWindow, windowdevice:, setwindowlevel::, imagecursor::::::)
	Removed compiler warnings about signed/unsigned comparision.
	Adopted to changes in GSDisplayServer.h.
	* Source/x11/XGDragView.m (_handleEventDuringDragging:,
	_updateAndMoveImageToCorrectPosition, _xWindowAcceptingDnDunderX:Y:,
	_xWindowAcceptingDnDDescendentOf:underX:Y:)  
	Removed compiler warnings about signed/unsigned comparision.
	* Source/xlib/XGGState.m (_doComplexPath:::)
	Removed compiler warnings about signed/unsigned comparision.
	* Source/xlib/GSXftFontInfo.m (setupAttributes)
	Removed compiler warnings about unused variable.
	* Source/win32/WIN32Server.m
	Adopted to changes in GSDisplayServer.h.
	windowStyleForGSStyle() changed parameter style to unsigned.
	* Tools/xpbs.m
	Removed include for file GSPasteboardServer.h to remove some
	compiler warnings.	

2003-06-12 21:44  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Handle 2.0.* correctly in the freetype
	version check.

2003-06-12 19:22  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m: Add XWindowBufferUseXShm defaults
	variable.

2003-06-11 15:32  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Implement -glyphWithName: and
	-appendBezierPathWithGlyphs:count:toBezierPath:.

2003-06-07 23:05  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Add some ifdef:s to get it to compile with
	both freetype <=2.1.2 and >=2.1.3.

2003-06-06  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m (setWindowHintsForStyle): Specifically
	check for success of XGetWindowProperty call.

2003-05-25  Adam Fedor  <fedor@gnu.org>

	* Version 0.8.6

2003-05-19 15:56  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/shfill.m (function_getsample): Clamp to range.
	(function_setup): Use -doubleValue, not -intValue, for values that
	are allowed to be real numbers.

2003-05-18  Benhur Stein

	* Source/xlib/XGGState.m (-copyBits:fromRect:toPoint:): Draw
	correctly when source and dest have different flip'ness.
	(-_compositeGState:sourcefromRect:fromRecttoPoint:toPointop:opfraction:]):
	Draw correctly when source is flipped.

2003-05-18 00:03  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/GNUmakefile, Source/art/shfill.m: Implement basic
	version of shfill operator.

2003-05-17 14:49  Alexander Malmberg <alexander@malmberg.org>

	* configure.ac: Make sure to add -lm when adding -ltiff (wasn't done
	in one case).

	* configure: Regenerate.

2003-05-11 19:21  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Report errors in more cases.

2003-05-07  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check for freetype separetely and add to xlib flags
	if present.

2003-05-02  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back/GNUmakefile: Remove GNUSTEP_MAKEFILES

2003-04-27  Adam Fedor  <fedor@gnu.org>

	* Updates for filesystem change.
	* GNUmakefile (GNUSTEP_MAKEFILES): Remove
	* Documentation/GNUmakefile, Source/GNUmakefile,
	Source/*/GNUmakefile, Tools/GNUmakefile: Idem
	* configure.ac: Replace $GNUSTEP_SYSTEM_ROOT/Makefiles with
	$GNUSTEP_MAKEFILES.  Replace Libraries with Library/Libraries.
	Replace Headers with Library/Headers.

2003-03-01  Fred Kiefer <FredKiefer@gmx.de>

	* Source/winlib/Win32FontInfo.m
	* Source/xlib/GSXftFontInfo.m
	* Source/xlib/XGFont.m
	In [setupAttributes] removed setting of fontDictionary values.
	* Source/xdps/AFMFileFontInfo.m
	Create the fontDictionary in [_setFontInfo].
	
2003-04-27 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/xpbs.m: ([xSendData:format:items:type:to:]) Fix bug
	calculating offset into data buffer.  Prevent crashing and
	provision of garbage data.

2003-04-10 12:12  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m (-dealloc): Don't explicitly set the
	X window's background pixmap back to None.

2003-04-02 14:04  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/blit.h: Clean up includes.

	* Source/art/blit.m (plusd_aa): Fix calculation of alpha.

2003-03-29 19:13  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/blit.h, Source/art/blit.m,
	Source/art/ftfont.h, Source/art/ftfont.m: Implement rendering of
	text to buffers with destination alpha. Change the subpixel
	font rendering to override the glyph operator since it's the one
	actually being used.

2003-03-25  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/GSXftFontInfo.m: Protect 'id' when including
	fontconfig/fontconfig.h (suggestion from Pete French).

2003-03-26 00:24  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m (-dealloc): Free the shared memory
	pixmap (if one was allocated).

	* Source/art/composite.m: When checking whether the overlap handling
	should be used, compare windows, not gstates.

2003-03-22  Willem Rein Oudshoorn  <woudshoo@xs4all.nl>

	* Source/x11/XGServerWindow.m ([XGServer -orderwindow:::]): 
	Use XWithDrawWindow instead of XUnmapWindow as suggested by
	Xlib programming manuals.

2003-03-03 20:05  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Remap glyph numbers from freetype so
	NSNullGlyph is never used.

2003-03-01  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/GSXftFontInfo.m
	In [setupAttributes] moved the call to open the XFT font further
	to the back as Derek Zhou claims that this takes over the
	ownership of the pattern, which then results in strange behaviour.
	
2003-02-27  Fred Kiefer <FredKiefer@gmx.de>

	* configure.ac
	Check for FreeType 2 fontconfig.
	* configure
	* config.h.in
	Regenerated
	* Header/xlib/GSXftFontInfo.h
	Define font enumerator for fontconfig.	
	* Source/xlib/XGContext.m
	Use new enumerator in anti-alias mode if available.
	* Source/xlib/GSXftFontInfo.m
	Added fontconfig specific code.
	Patch from Derek Zhou dzhou@chrontel.com with some adaption
	
2003-03-24  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.5

2003-03-11  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Only add libgdi32 for winlib

2003-03-08  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGOpenGL.h: Standardize BOOL redefine to XWINDOWSBOOL.

2003-02-24  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.4

2003-02-20  Willem Rein Oudshoorn  <woudshoo@xs4all.nl>

	* Source/xlib/XGFont.m ([XGFontInfo -setupAttributes]): Use
	ascender and descender informaton of the X11 font instead of using
	maximum bounding box.

2003-02-19  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (fpfloat): New function. Used everywhere
	to print a float regardless of current locale.

2003-02-17  Willem Rein Oudshoorn  <woudshoo@xs4all.nl>

	* Source/x11/XGDragView.m ([XGDragView -drawRect:]): use [self
	frame] instead of `rect'.  Fixes #101846.
	([XGDragView -_handleDrag:]): Fixed typo in comment
	([XGDragView -_handleEventDuringDragging:theEvent]): Removed old 
	comment.
	
2003-02-16 Richard Frith-Macdonald <rfm@gnu.org>

	* Source/x11/XGDragView.m: Set drag window at NSPopUpMenuWindowLevel
	so that it lies above pretty much anything apart from screensaver.

2003-02-09  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m
	Removed implementation of image sliding. Corrected
	xgps_cursor_image compiler warning.
	* Header/x11/XGSlideView.h
	* Source/x11/XGSlideView.m
	Removed files as they are now in the front end.
	* Source/x11/GNUmakefile
	Removed XGSlideView.m
	
2003-02-10 18:44  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Implement -glyphIsEncoded:.
	(add_face): Avoid calling malloc(0).

2003-02-09  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (-GSShowGlyphs::): Implement to use
	glyphshow if font gives back glyph names, otherwise use previous
	hack.

2003-02-09  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSStreamContext.m
	[DPSconcat:] simplify the output for common cases.
	[GSShowGlyphs::] added hack implementation, so that some usefull
	output is still provided.

2003-02-08 21:10  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Add somewhat experimental -nameOfGlyph:
	method to try to get printing to work.

2003-02-06 Richard Frith-Macdonald <rfm@gnu.org>

	* Tools/gpbs.m (ihandler): Fix for mingw, which doesn't have kill()
	* Headers/winlib/WIN32FontInfo.h: New method to draw glyphs
	* Source/winlib/WIN32FontInfo.m: New method to draw glyphs
	* Source/winlib/WIN32GState.m: New method to draw glyphs

2003-02-02 22:00  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (-initWithFontName:matrix:screenFont:): Use
	better guess for x-height value.

	* Source/x11/XGServerWindow.m: Use safer order of includes.

	* Source/xlib/GSXftFontInfo.m (-widthOfGlyphs:lenght:,
	-drawGlyphs:lenght:onDisplay:drawable:with:at:): Convert glyph
	buffers to 16-bit buffers that the Xft functions can handle.

	* Source/xlib/XGFont.m: Whitespace cleanups.

2003-01-31  Chris B. Vetter <chrisv@web4inc.com>

	* Tools/gpbs.m (-dealloc): Remove observer.
	(ihandler): Reset all signals and try to reraise original signal.
	(init): Set NSIG signals.
	(main): release server before exiting.

2003-02-02  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/GSXftFontInfo.m
	Added glyph methods needed for new text system.
	
2003-01-31  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m
	Implemented [movewindow::] and [restrictWindow:toImage:].
	* Source/x11/XGBitmapImageRep.m
	Removed the xPixmap methods.
	* Source/x11/XGSlideView.m
	Use new display server methods to implement without X calls. This
	class can now be moved to frontend.
	* Source/x11/XGDragView.m
	Use new display server methods.
	
2003-01-31 22:33  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (-_generateGlyphsForRun:at:): Implement
	handling of text attachments.

2003-01-27 18:10  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m: Clean up includes.
	(-initWithFontName:matrix:screenFont:):	Use absolute values of the
	matrix entries when checking if a screen font entry should be used.

2003-01-26 21:24  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/GSXftFontInfo.m: Update with screen font changes in
	backend/gui interface.

2003-01-26 20:07  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m (-_exposeRect:): Round rectangle to
	expose outwards so all pixels intersected by the expose rectangle
	are actually exposed.

2003-01-26 20:04  Alexander Malmberg <alexander@malmberg.org>

	* Headers/xlib/XGPrivate.h, Source/art/ARTContext.m,
	Source/art/ARTGState.h, Source/art/composite.m, Source/art/ftfont.h,
	Source/art/ftfont.m, Source/art/image.m, Source/art/path.m,
	Source/winlib/WIN32FontInfo.m, Source/xdps/AFMFileFontInfo.m,
	Source/xlib/XGFont.m, Source/xlib/XGGState.m: Merge in
	text-system-branch.

2003-01-26 18:17  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/XGFont.m: Make -GSShowGlyphs::'s helpers actually
	work.

2003-01-26 17:22  Alexander Malmberg <alexander@malmberg.org>

	* Headers/xlib/XGPrivate.h, Source/xlib/XGFont.m,
	Source/xlib/XGState.m: Implement basic version of -GSShowGlyphs::
	with a few helpers.

2003-01-26 17:15  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ftfont.m (-advancementForGlyph:): Return correct
	metrics for both screen and printer fonts.

2002-11-26 12:58  Alexander Malmberg <alexander@malmberg.org>

	* Source/winlib/WIN32FontInfo.m, Source/xdps/AFMFileFontInfo.m,
	Source/xlib/XGFont.m, Source/xlib/XftFontInfo.m: Update with new
	screen font changes in backend/gui interface.

	Source/art/ftfont.m: Update with new interface. Add basic support
	of screen fonts.

2002-11-24 00:40  Alexander Malmberg <alexander@malmberg.org>

	* Source/x11/XWindowBuffer (-_exposeRect:): Round coordinates
	explicitly to avoid truncating problems.

2002-11-24 00:35  Alexander Malmberg <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/ftfont.h, Source/art/ftfont.m:
	Implement the glyph generation backend methods. Implement the
	GSShowGlyphs operator. Handle glyphs properly in FTFontInfo.

2003-01-23  Adam Fedor  <fedor@gnu.org>

	* Headers/xlib/GSXftFontInfo.h: Renamed from XftFontInfo
	* Source/xlib/GSXftFontInfo.m: Idem.
	* Source/xlib/GNUmakefile: Update for change.
	* Source/xlib/XGContext.m: Idem.
	
2003-01-23  Adam Fedor  <fedor@gnu.org>

	* Documentation/Back: Some documentation.

2003-01-20  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (-GSSetCTM:): Implement.
	(-GSConcatCTM:): Idem.
	(-NSDrawBitmap:::::::::::): Don't flip images in a flipped view.
	Correct scaling of images.

Tue Jan 21 02:08:05 2003  Alexander Malmberg <alexander@malmberg.org>

	* Source/xlib/XGFont.m ([XGFontInfo -dealloc]): Fixed memory leak:
	use XFreeFont(), not XUnloadFont().

2003-01-14  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Check for GLX_RGBA_TYPE in glx.h

2003-01-14  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xdps/NSDPSContext.m
	Removed unneeded method [xrContext]. Moved context access into
	[createDPSContext] and call [XGServer xrContextForScreen:] instead
	of [XGServer xrContext].

2002-12-31  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGOpenGL.h: Redefine BOOL to avoid name collision

2002-11-27  Frederic De Jaeger <dejaeger@free.fr>

	* configure.ac: add the flag --disable-glx.
	* configure: regenerated

2002-11-24  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XIMInputServer.m
	In [lookupStringForEvent:window:keysym:] autorelease the string,
	so it gets freed late on.
	
2002-11-21  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.3

	* Source/gsc/GSStreamContext.m (-GSSendBezierPath:): Add back and 
	implement.

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	minor correction.

2002-11-21  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	Implemented [GSSendBezierPath:].
	* Source/gsc/GSStreamContext.m
	Removed (empty) implementation of [GSSendBezierPath:].
	* Source/x11/XGServer.m
	Added #ifdef around include of XGOpenGL.h.

2002-11-16  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGGLContext.m (-initWithFormat:shareContext:): Remove
	assert.

	* Source/x11/XGServerWindow.m ([XGServer -setinputstate::]): Return
	if window is NULL.

2002-11-16  Gregory John Casamento <greg_casamento@yahoo.com>

	* Headers/x11/XGOpenGL.h: Added define to avoid collision of
	parameters named "id" in some versions of the OpenGL headers
	with the Objective-C type "id".   This was causing build of
	back to fail.

2002-11-15  Frederic De Jaeger <dejaeger@free.fr>

	* Source/x11/XGGLFormat.m, Source/x11/XGGLContext.m
	  Headers/x11/XGOpenGL.h: New files.
	* Source/x11/Makefile: Updated.
	* configure.ac: add a test for GLX
	* Source/x11/XGServer.m (glContextClass,
          glPixelFormatClass): Implement.

2002-11-08  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	Reassert focus and/or send FocusIn event in all cases.

2002-10-29  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -_checkWindowManager]):
	Make sure not to dereference possible NULL pointer.

2002-10-28  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (-DPSsetalpha:): Use GSsetalpha
	as defined in frontend, for printers that don't support setalpha.

2002-10-27  Adam Fedor  <fedor@gnu.org>

	* Tools/font_cacher.m: Add @end (Reported by Caba Conti
	<520040438669-0001@t-online.de>).

2002-10-21  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XIMInputServer.m
	([XIMInputServer -initWithDelegate:display:name:]): Use
	GSEncodingFromLocale.
	* Source/xlib/XGFont.m ([XGFontInfo -setupAttributes]): Idem.
	* Source/xlib/XftFontInfo.m ([XftFontInfo -setupAttributes]): Idem.

2002-10-19  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	Don't set desiredFocusWindow to 0.
	([XGServer
	-receivedEvent:type:extra:forMode:] (FocusOut): Hack: if focus
	went nowhere, don't deactivate app.

2002-10-18  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:] (ClientMessage:TAKE_FOCUS)):
	Only send event if we don't have a key window.

2002-10-15 01:37  Alexander Malmberg  <alexander@malmberg.org>

	* Tools/GNUmakefile: Use BUILD_SERVER to decide whether to build
	X specific parts of gpbs or not.

2002-10-13  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.2.
	* Documentation/news.texi: Update.

Fri Oct 11 00:47:04 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/xlib/XGFont.m ([XGFontInfo -setupAttributes]): Return NO
	if the font can't be loaded.  (Patch by Georg Fleischmann
	<georg@vhf.de>).

2002-10-10  Adam Fedor  <fedor@gnu.org>

	* GNUmakefile.postamble: Only install back.make if building
	as a library.

2002-10-10  Fred Kiefer <FredKiefer@gmx.de>

	* Source/xlib/XGGState.m
	DPSsetdash::: now accepts an empty dash pattern, signaling a reset
	to a solid line.

2002-10-08  Adam Fedor  <fedor@gnu.org>

	* Update for front-end passing colorspaces and fonts
	in overridable way.
	* Headers/gsc/GSGStateOps.h: Update changed methods.
	* Source/art/ARTContext.m: Font ivar is now a GSFontInfo
	class, so use 'font' instead of '[font fontInfo]'.
	* Source/gsc/GSContext.m (-GSSetFont): Idem.
	(-GSSetFillColorspace:): Implement.
	(-GSSetStrokeColorspace:): Idem.
	(-GSSetFillColor:): Idem.
	(-GSSetStrokeColor:): Idem.
	* Source/gsc/GSGState.m: Update font ivar handling.
	* Source/gsc/GSStreamContext.m: Idem.
	* Source/winlib/WIN32GState.m: Idem.
	* Source/xlib/XGGState.m: Idem.

	* Window focus fixes
	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:](ClientMessage/TAKE_FOCUS)):
	Use given window as focus window, not one under mouse.
	* Source/x11/XGServerWindow.m ([XGServer -setinputfocus:]): Don't
	reset focus if we already requested it on this window.
	
2002-09-28 22:04  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Add .font package handling again.

2002-09-28 17:30  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m (load_font_configuration): Handle the
	'Family' key.

2002-09-26 16:08  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Implement handling of the 'ScreenFonts' key
	in .nfont packages.

2002-09-25 22:39  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Rework font configuration code to handle
	the updated (and rather different) .nfont package format.

2002-09-24 14:38  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Use GSFontAntiAlias defaults value to decide
	whether	antialiasing should be enabled in the default rendering
	hints.

2002-09-24 13:22  Alexander Malmberg  <alexander@malmberg.org>

	* Source/x11/XWindowBuffer.m (+windowBufferForWindow:depthInfo:):
	Detect and handle errors properly. Only use shared memory for
	reasonably large windows.

	(-needsAlpha): Make data isn't NULL before trying to do anything.

2002-09-23 19:30  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m (-initWithFontName:matrix:): Retain
	familyName correctly.

2002-09-21 12:14  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/x11/XWindowBuffer.h, Source/x11/XWindowBuffer.m
	(+windowBufferForWindow:depthInfo:): If possible, create a shared
	pixmap from the image data and set it as the background of the
	window.

2002-09-20 18:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (clip_svp_callback): Use correct x coordinate
	for final span.

	(-_clip_add_svp:): Place the last entry at the correct place
	in clip_index.

2002-09-20 18:05  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (clip_svp_callback, -_clip_add_svp:): Update
	the clipping bounding box.

2002-09-19  Adam Fedor  <fedor@gnu.org>

	* Source/win32/WIN32Server.m ([WIN -setbackgroundcolor::]): New.
	* Source/x11/XGServerWindow.m ([XGServer -_createBuffer:]): Remove
	setting background pixmap.
	([XGServer -setbackgroundcolor::]): New

	* Source/xlib/XGGState.m
	(-_compositeGState:sourcefromRect:fromRecttoPoint:toPointop:opfraction):
	Convert destination point not rect.
	(-DPSimage:matrix:pixelsWide:pixelsHigh:bitsPerSample:samplesPerPixel:bitsPerPixel:bytesPerRow:isPlanar:hasAlpha:colorSpaceName:data):
	Remove flipping.	

2002-09-19 00:33  Alexander Malmberg  <alexander@malmberg.org>

	* Header/x11/XGInputServer.h, Source/x11/XIMInputServer.m: Track
	all created XIC:s and destroy them explicitly.

2002-09-18 19:59  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.h, Source/art/blit.m, Source/art/composite.m:
	Implement -dissolveGState:fromRect:toPoint:delta:.

2002-09-18 00:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m (-DPSimage:::::::::::): Treat input as
	pre-multiplied in the common case to (really) match xlib/.

2002-09-16 16:43  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m (add_face): Change default rendering hints.

2002-09-16 16:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTGState.h, Source/art/ARTContext.m,
	Source/art/image.m, Source/art/composite.m, Source/art/path.m:
	Handle NSBackingStoreNonretained.

2002-09-14 13:39  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Keep track of the family name in FTFaceInfo
	so FTFontInfo can set it correctly.

2002-09-14 13:03  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Add support for some simple rendering hints
	in .nfont packages.

2002-09-12 02:29  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m (_image_get_color_rgb_8,
	_image_get_color_rgb_cmyk_gray): Fix clamping of y.

2002-09-10 22:11  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/x11/XWindowBuffer.h: Add more documentation.

2002-09-10 21:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTWindowBuffer.h, Source/art/ARTWindowBuffer.m,
	Source/x11/XWindowBuffer.m, Headers/x11/XWindowBuffer.h: Rename
	ARTWindowBuffer to XWindowBuffer and move it to x11/ so other
	backends can use it. Update many files in Source/art/.

2002-09-10 17:35  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/composite.m: Implement handling of tranformations and
	clipping.

2002-09-08  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer
	-_XWinFrameToOSWinFrame:for:]): New.
	([XGServer -_addExposedRectangle::]): Convert rect to OS coords.
	([XGServer -_processExposedRectangles:]): Invalidate exposed
	rects in view. (patch from Frederic De Jaeger).

2002-09-06  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSContext.m (-initWithContextInfo:): Fix
	for GSStreamContext subclass.
	* Source/GSStreamGState.m: New file.
	* Source/GSStreamContext.m: Make a subclass of GSContext.
	Call superclass implementation where appropriate.

	* Source/GSStreamContext.m: Fix for 'show'ing parenthesis
	characters (patch from Stefan Urbanek).
	
2002-09-01  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.1

2002-09-01 12:58  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m ([ARTGState -GSCurrentDevice:::]): Check
	for NULL pointers before setting values.

2002-08-31 19:54  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/path.m (DPSrectfill::::): Calculate alpha pointer
	correctly when clipped.

	* Source/art/composite.m (-compositeGState:fromRect:toPoint:op:):
	Fix detection of horizontal-only overlap (order==2), and handling
	it in the general case.

	* Source/blit.m: Whitespace cleanups.

2002-08-31 15:52  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m: Implement clipping of images using the
	clipping spans.

2002-08-31 14:40  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/ARTGState.h, Source/art/path.m:
	Store clipping path as a set of spans instead of as an svp. Build
	spans from DPSclip and DPSeoclip, and use it when clipping (only
	implemented for paths, so far).

2002-08-30 15:42  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.h, Source/art/blit.m, Source/art/path.m: Move
	svp rendering code to path.m.

2002-08-30 01:29  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/GNUmakefile, Source/art/ARTContext.m, Source/art/path.m:
	Move remaining path handling code to path.m. Reformat.

2002-08-30 00:33  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/gsc/GSGStateOps.h, Source/art/ARTContext.m: Remove
	ARTGState's own path handling and have it use GSGState's again.

2002-08-28  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	New method [currentPoint], gets used in [DPScurrentpoint::].
	Corrected [DPSarc:::::] and [DPSarcn:::::] to draw the arc in user
	space and transfrom it afterwards and implemented  [DPSarct:::::].

2002-08-28 18:55  Alexander Malmberg  <alexander@malmberg.org>

	* Source/x11/XGBitmapImageRep.m, Source/xlib/XGBitmapImageRep.m,
	Source/x11/GNUmakefile, Source/xlib/GNUmakefile: Move
	XGBitmapImageRep.m from xlib/ to x11/.

	* Source/art/ARTContext.m: Remove the copy of the XGBitmapImageRep
	code.

	* Source/art/blit.m: Add missing include of NSDebug.h.

2002-08-28 16:01  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.m (artcontext_setup_draw_info): Change NSLog to
	NSDebugLLog.

2002-08-28 13:29  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Make the filters used in subpixel rendering
	configurable.

2002-08-28 00:34  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.m: Do basic gamma correction when rendering
	text.

2002-08-27 12:10  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/: Fix copyright notices.

2002-08-27 11:58  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ftfont.m: Add experimental subpixel text renderer.

	* Source/art/blit.h, Source/art/blit.m: Add render_blit_subpixel
	function, used in subpixel rendering.

2002-08-27 10:23  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/composite.m,
	Source/art/GNUmakefile: Move compositing code to its own file.
	Reformat.
	(-_composite_func::::::): Handle the plusl_oo case correctly.
	(-compositerect:op:): Handle inline alpha in the general case.

2002-08-26 16:36  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/image.m: Assume that input isn't premultiplied in
	all cases (to match -xlib behavior, for now). Reformat to fit
	coding standards better.

2002-08-26 15:59  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/art/ARTContext.h, Source/art/ARTContext.m,
	Source/art/ARTWindowBuffer.m, Source/art/GNUmakefile,
	Source/art/blit.h, Source/art/ARTGState.h, Source/art/image.m: Move
	image handling (-DPSimage...) to its own file. Add handling of
	arbitrary transformations, arbitrary bits/samples, bits/pixel, etc.,
	planar data, and gray and cmyk colorspaces.

2002-08-26 01:09  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.m: Reformat to fit coding standards better.

2002-08-26 00:33  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m (-DPSimage:::::::::::): Assume input is
	pre-multiplied.

2002-08-25 21:41  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m (-_composite_func::::::): Implement
	special optimized handling of transparent source.

2002-08-25 20:48  Alexander Malmberg  <alexander@malmberg.org>

	* Headers/gsc/GSGState.h, Headers/gsc/gscolors.h,
	Source/art/ARTContext.m, Source/gsc/GSGState.m, Source/gsc/gscolors.c,
	Source/winlib/WIN32GState.m, Source/xlib/XGGState.m: Optimize color
	handling by passing around pointers to device_color_t structures
	(instead of the structures themselves).

2002-08-23 01:54  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTWindowBuffer.m (+artWindowBufferForWindow:): Mark
	the segment for destruction after X has attached to it.

2002-08-23 01:44  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: Implement handling of non-rectangle
	clipping paths. Use it when rendering paths (but not for other
	operators yet).

2002-08-22 02:34  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: (-DPSrectclip::::): Fix rounding when
	converting to pixel coordinates.

2002-08-21 20:27  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m, Source/art/ARTWindowBuffer.h,
	Source/art/ARTWindowBuffer.m, Source/art/GNUmakefile: Renamed the
	WinImage class to ARTWindowBuffer and moved it to its own file.

2002-08-21 14:52  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/blit.h, Source/art/blit.m, Source/art/ftfont.h,
	Source/art/ftfont.m: Reformat to fit coding standards better.

2002-08-21 13:50  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: Move common code from _fill and DPSstroke
	to convert the current path to an ArtVpath to a new method. Update
	callers.

	(-compositerect:op:): Create alpha buffer for NSCompositeCopy
	if the current color isn't completely opaque.

2002-08-21  Alexander Malmberg  <alexander@malmberg.org>

	* Source/art/ARTContext.m: ([WinImage -_exposeRect:]) Guard against
	invalid coordinates to (hopefully) fix the problem with windows
	turning all white and BadValue warnings appearing.

2002-08-20  Alexander Malmberg <alexander@malmberg.org>

	* Headers/art/, Source/art/: Add back-art, a backend based on
	libart and freetype.

2002-08-15  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Add NetBSD header/ldflag support (Patch from
	Peter Cooper). Cleanup freebsd support.

2002-08-06  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerEvent.m ([XGServer
	-receivedEvent:type:extra:forMode:]): Add special gotShmCompletion
	call for libart backend.

2002-08-02  Adam Fedor  <fedor@gnu.org>

	* Merge from 0.8.0 into main branch.

2002-08-01  Adam Fedor  <fedor@gnu.org>

	* Version: 0.8.0
	
	* configure.ac: Check for usleep.
	* Source/x11/XGServerWindow.m ([XGServer -windowdevice:]):
	Use alternate if no usleep.

2002-07-28  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGBitmap.m (_pixmap_combine_alpha): Use
	interger arithmatic. (Patch from Jeff Teunissen)

2002-07-19  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGGeometry.m (clipXRectsForCopying): Shift rect
	origin to account for clipping.
	* Source/xlib/XGGState.m (-setAlphaColor:): Correct colorspace
	of alpha color.

2002-07-17  Adam Fedor  <fedor@gnu.org>

	* Version: 0.7.9

2002-07-14  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XIMInputServer.m (-ximCreateIC:): Don't set
	FocusWindow attrib. Causes a segfault at XCloseDisplay..

2002-07-13  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGBitmap.m (_pixmap_combine_alpha): Fix and
	cleanup alpha blending (Rescale by alpha)
	(_bitmap_combine_alpha): Idem. (Patch from Jeff Teunissen).

2002-06-28  Adam Fedor  <fedor@gnu.org>

	* Source/xlib/XGFont.m ([XGFontInfo -xCharStructForGlyph:glyph]):
	Fix variable typo - using wrong index to glyph (patch from 
	stoyan@hologr.com).

2002-06-24  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -windowdevice:]): Use
	usleep instead of loop to wait for resize (rewritten
	patch from georg@vhf.de).

Sat Jun 22 14:28:28 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/gsc/GSGState.m ([-DPScurrentpoint::]): Use -invert, not
	-inverse, to invert an affine transform.

Sat Jun 22 14:24:20 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/gsc/GSContext.m
	([-NSDrawBitmap:rect:pixelsWide:pixelsHigh:
	bitsPerSample:samplesPerPixel:bitsPerPixel:bytesPerRow:
	isPlanar:hasAlpha:colorSpaceName:data]): Use scaleXBy:yBy: rather
	than scaleBy::.
	* Source/gsc/GSGState.m ([-DPSscale::]): Idem.
	
2002-06-20  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServer.m (_parse_display_name): New.
	([XGServer -_initXContext]): Use it.

2002-06-15  Alexander Malmberg <alexander@malmberg.org>

	* configure.ac, configure: Use libart2-config and freetype-config
	to get libs and cflags for libart and freetype. Updated configure.
	* Source/gsc/GSGState.m (-DPSinitgraphics): Set alpha _before_
	calling -setColor:state:.

2002-06-10  Adam Fedor  <fedor@gnu.org>

	* Version 0.7.8


2002-06-09  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Set WIN32 and WINLIB only on mingw32 systems.

2002-06-08  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/winlib/WIN32FontInfo.h
	Added ivar for font handle.
	* Source/winlib/WIN32FontInfo.m
	Implemented most of the code to support different fonts.
	
2002-06-08  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	Coorected [DPSrectfill::::], [DPSrectstroke::::] and 
	[DPSrectclip::::] not to change the path. 
	* Source/winlib/WIN32GState.m
	[DPSrectstroke::::] same correction.

2002-06-04  Fred Kiefer <FredKiefer@gmx.de>

	* Source/gsc/GSGState.m
	Added default implementation for [DPSrectfill::::], 
	[DPSrectstroke::::] and [DPSrectclip::::].
	* Header/winlib/WIN32GState.h
	Added ivar to store old clip region.
	* Source/winlib/WIN32GState.m
	[_paintPath:], [DPSrectclip::::], [DPSinitclip], [setStyle:]  
	and [restoreStyle:]: Rewrote the whole clipping code.
	Added [deepen] and [dealloc] for consistency.
	Simplified [DPSrectstroke::::].
	
2002-06-03  Adam Fedor  <fedor@gnu.org>

	* Source/win32/WIN32Server.m (-beep): Implement
	* Source/winlib/WIN32Context.m (-NSBeep): Remove.

	* Source/x11/XGServer.m (-beep): Implement.
	* Source/xlib/XGContext.m (-NSBeep): Remove.

2002-06-02  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m
	Treat NSBackingStoreRetained the same as NSBackingStoreBuffered, 
	just as the X backends do. 
	* Source/winlib/WIN32GState.m
	Reimplemented creation of bitmaps. This should now work for all 
	bitmaps with >16 bits per pixel. The bitmaps that are still missing 
	are due to clipping problems, as can be seen by switching clipping off.
	
2002-05-12  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSGState.m (-DPSsetalpha:): Call setColor:state:.
	Clamp value to 0<x<1
	(-DPSsetcmykcolor::::): Idem.
	(-DPSsetgray:):Idem.
	(-DPSsethsbcolor:::):Idem.
	(-DPSsetrgbcolor:::):Idem.
	(-GSSetFontSize:): Use given size.
	(-initWithDrawContext:): Call DPSinitgraphics
	(-DPSinitgraphics): Init all our graphics state.  
	* Source/gsc/gscolors.c (gsHSBToRGB): Fix for h==1.
	(gsColorToCMYK): Implement.
	(gsColorToHSB): Idem. (Patches and suggestions from
	alexander@malmberg.org, rearranged a little).

	* Source/xlib/XGFontManager.m (load_cache): Use NSBundle to find
	font_cacher.

	* Source/xlib/XGGState.m (GSSetFont:) Rename from setFont.
	(-DPSinitgraphics): Call super.
	* Source/winlib/WIN32GState.m (-DPSinitgraphics): Call super.

	* Tools/GNUmakefile: Build font_cacher if BUILD_GRAPHICS=xlib

2002-05-11  Richard Frith-Macdonald <rfm@gnu.org>

	* Source/Source/xlib/XGFont.m: ([-xCharStructForGlyph:]) use newer
	GSGFromUnicode() API.

2002-05-09  Adam Fedor  <fedor@gnu.org>

	* Headers/gsc/GSGState.h: Add color and text ivars.
	* Headers/winlib/WIN32GState.h: Idem.
	* Headers/xlib/XGGState.h: Idem.

	* Source/gsc/GSContext.m: Implement font/text methods.
	* Source/gsc/GSGState.m (-setColor:state:) Implement
	Implement color DPS and GS ops to use it.
	Implement text/font ops.

	* Source/winlib/WIN32GState.m (-setColor:state:) Implement.
	Remove color ops (now in GSGState)

	* Source/xlib/XGGState.m (-setColor:state:) Implement.
	(-setAlphaColor:) New.
	Remove color ops (now in GSGState)

2002-05-07  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSStreamContext.m (-GSSetFont:): Don't flip
	the font for a flipped view.

2002-05-06  Adam Fedor  <fedor@gnu.org>

	* configure.ac (BUILD_SERVER): Set to predefined define
	* Source/GSBackend.m: Use it.

2002-05-05  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Simplify backend selection using --enable-server
	and --enable-graphics. Add --with-library-flags and
	--with-include-flags for adding additonal flags. Revert last
	change to XShm.h test. Add check for art libraries.
	* Source/GNUmakefile: Conform to new configure output
	* Source/GSBackend.m: Idem.
	* Headers/x11/wraster.h: Idem.
	* Source/x11/XIMInputServer.m: Correct define for HAVE_UTF8

	* GNUmakefile.postamble (after-distclean): Remove config.h
	* Source/gsc/GSContext.m (-dealloc): Destroy gstate.
	* Source/x11/XGServerWindow.m([XGServer
	-_addExposedRectangle::]): Use current context class
	([XGServer -flushwindowrect::]): Idem. (patches from 
	alexander@malmberg.org).

2002-05-04  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Improved check for XShm.h
	* Headers/x11/wraster.h: Use HAVE_X11_EXTENSIONS_XSHM_H
	* Source/x11/XIMInputServer.m: Fix #if for USE_XIM (patch from
	alexander@malmberg.org)
	* Source/xlib/XGContext.m: Idem for HAVE_XFT

2002-05-03  Adam Fedor  <fedor@gnu.org>

	* GNUmakefile.postamble: Remove '/' in
	$(INSTALL_ROOT_DIR)/$(GNUSTEP_MAKEFILES) so Windows won't
	complain.

2002-05-02  Adam Fedor  <fedor@gnu.org>

	* configure.ac: Updated to autoconf 2.53 from configure.in
	* configure, config.h.in: Regenerate.
	* acconfig.h: Remove

2002-05-01  Adam Fedor  <fedor@gnu.org>

	* config.make.in: Add newline at end - causes Solaris sed to barf.

2002-04-30  Adam Fedor  <fedor@gnu.org>

	* Version: 0.7.7
	* Documentation/news.texi: Update
	* NEWS: Regenerate.

2002-04-27  Ludovic Marcotte <ludovic@Sophos.ca>

	* Source/xlib/XGFontManager.m: Added a RETAIN call to the
	allFontNames ivar in -enumerateFontsAndFamilies since we would
	reference a dealloc'ed object after this method call.

2002-04-27  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/win32/WIN32Server.h
	* Headers/winlib/WIN32GState.h
	* Source/win32/WIN32Server.m
	* Source/winlib/WIN32GState.m
	Made sure only resources allocated by our code will ever be freed.
	
2002-04-26  Adam Fedor  <fedor@gnu.org>

	* acconfig.h: Define HAVE_UTF8
	* config.h.in: Regen.

2002-04-24  Adam Fedor  <fedor@gnu.org>

	* configure.in: Don't enable wraster support if --with-wraster=none.
	Print error if no backend server or graphics configured.

2002-04-23  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGServer.h: Rework to handle multiple screens.
	* Headers/xlib/XGContext.h: Simplify.

	* Source/win32/WIN32Server.m (-mouseLocationOnScreen:window:): 
	Implement.

	* Source/x11/XGServer.m: Rework to handle multiple screens. New
	XScreenContext class.
	(-initXContext): Use it.
	(-_screenContextForScreen:): Implement.
	(-xrContextForScreen:): Idem.
	(-drawMechanismForScreen:): Idem.
	(-xDisplayRootWindowForScreen:): Idem.
	(-xColorFromColor:forScreen:): Idem.
	* Source/x11/XGServerEvent.m (-mouseLocationOnScreen:window:):
	Implement.
	* Source/x11/XGServerWindow.m (-window::::): Use screen arg.
	(_blankCursor): Use default screen for drawable (?).
	(imagecursor::::::): Idem.

	* Source/xlib/XGBitmapImageRep.m: Update for new server interface.
	* Source/xlib/XGGState.m: Idem.

2002-04-22  Georg Fleischmann

	* back/Source/xlib/XGGState.m
	[XGGState DPSsetlinewidth:]: scale line width.

2002-04-23  Fred Kiefer <FredKiefer@gmx.de>

	* Source/win32/WIN32Server.m
	[window::::] corrected and simplified the last change.

2002-04-22  Adam Fedor  <fedor@gnu.org>

	* configure.in: Check for gdi32.

	* Source/win32/WIN32Server.m (window::::): Update for new interface -
	frame is frame rect, not content rect.
	
	* Source/x11/XGServer.m (-_initXContext): Look for
	display attributes in server_info.
	* Source/x11/XGServerWindow.m (-window::::): Update for new interface.

2002-04-21  Fred Kiefer <FredKiefer@gmx.de>

	* Headers/win32
	* Headers/win32/WIN32Server.h
	* Headers/win32/WIN32Geometry.h
	* Source/win32
	* Source/win32/GNUmakefile
	* Source/win32/GNUmakefile.preamble
	* Source/win32/WIN32Server.m
	New directories and files with Display Server for MS Windows.
	* Headers/winlib
	* Headers/winlib/WIN32Context.h
	* Headers/winlib/WIN32GState.h
	* Headers/winlib/WIN32FontEnumerator.h
	* Headers/winlib/WIN32FontInfo.h
	* Source/winlib
	* Source/winlib/GNUmakefile
	* Source/winlib/GNUmakefile.preamble
	* Source/winlib/WIN32Context.m
	* Source/winlib/WIN32GState.m
	* Source/winlib/WIN32FontEnumerator.m
	* Source/winlib/WIN32FontInfo.m
	New directories and files for drawing on MS Windows.
	* configure
	Add library gdi32 for winlib back end.
	* Source/GSBackend.m
	Corrected to handle the winlib/win32 backend correctly.
	* Tools/gpbs.m
	Ifdefed some signals that are not defined in mingw and use spawn 
	instead of fork on mingw. 
	
2002-04-19  Richard Frith-Macdonald <rfm@gnu.org>

        * Tools/gpbs.m: If given -NSHost specification for the current host,
        ignore it and use the standard name.

2002-04-15  Gregory John Casamento <greg_casamento@yahoo.com>
	* configure.in: Added check to determine if libXft contains
	XftDrawStringUtf8 which is used to draw unicode strings.  

2002-04-15  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer
	-_addExposedRectangle::]): Use current server class
	([XGServer -flushwindowrect::]): Idem.
	(Suggestion by alexander@malmberg.org)

	* Source/x11/XIMInputServer.m (-initWithDelegate:display:name:): 
	Use defaultCStringEncoding if UTF8 doesn't work.
	(Patch from stoyan@on.com.ua).

2002-04-14  Adam Fedor  <fedor@gnu.org>

	* Headers/x11/XGServerWindow.h: Add graphics driver protocol
	information.
	* Source/x11/XGServerWindow.m (_createBuffer:): Use it.
	(-termwindow:): Idem.
	([XGServer -windowbacking::win]): Idem.
	([XGServer -windowdevice:]): Idem.
	([XGServer -_addExposedRectangle::]): Idem.
	([XGServer -flushwindowrect::]): Idem.

	* Source/xlib/XGBitmapImageRep.m: Use new GSCurrentDevice.
	* Source/xlib/XGContext.m: Idem.
	* Headers/xlib/XGGState.h: Use window device, not window number.
	* Source/xlib/XGGState.m: Idem.

Thu Apr 11 22:24:01 2002  Nicola Pero  <n.pero@mi.flashnet.it>

	* Source/x11/XGServerEvent.m: Added missing includes.
	* Source/x11/XGServerWindow.m: Idem.
	* Source/x11/XGDragView.m: Idem.
	2
2002-04-11  Richard Frith-Macdonald  <rfm@gnu.org>

	* Tools/gpbs.m: Fixed bug in argument parsing ... was objecting to
	-NSHost!

2002-04-10  Adam Fedor  <fedor@gnu.org>

	* configure.in: Don't set X paths if no X found. Only set
	/usr/local paths for freebsd

	* Source/gsc/GSContext.m: Remove currentgstate, gstate
	* Source/x11/XGServerWindow.m (windowbacking:) Implement.

2002-04-06  Adam Fedor  <fedor@gnu.org>

	* configure.in: Renable XIM by default again.

	* Source/gsc/GSStreamContext.m (GSSetFont:): Implement.
	Fix up show methods and fix spaces in method names.

	* Source/xlib/XGContext.m (-initWithContextInfo:): Return
	alternate (PS) context when indicated.

	* Source/xlib/xrtools.c: Simplify color conversion routines.
	* Source/xlib/XGGState.m: Use them
	
2002-04-03  Adam Fedor  <fedor@gnu.org>

	* Source/GNUmakefile.preamble: Fix LIB_DIRS and
	LIBRARIES_DEPEND_UPON for compiling as a library.

2002-04-02  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSContext.m (-GSDefineGState): Use new def - also
	creates a copy of the gstate.
	(-GSReplaceGState): Replace with copy of current gstate.

	* configure.in (--with-name): Configure the name of the backend
	* back.make.in: Idem.
	* config.make.in: Idem.
	* Source/GNUmakefile: Idem.
	* Documentation/install.texi: Document.

	* Source/GNUmakefile.preamble: Missing include.

	* Source/x11/XGServerWindow.m: Fix slideImage method name.

2002-04-01  Adam Fedor  <fedor@gnu.org>

	* Source/x11/XGServerWindow.m ([XGServer -_setupRootWindow]): Read
	GSAppOwnsMiniwindow default.
	([XGServer -appOwnsMiniwindow]): Use it.
	([XGServer -miniwindow:): Idem.

	* Source/gsc/GSContext.m (-GSSendBezierPath:): Implement
	(-GSRectClipList::): Likewise.
	(-GSRectFillList::): Likewise.
	(-GSCurrentCTM): Likewise.
	(-GSSetCTM:): Likewise.
	(-GSConcatCTM:): Likewise.
	* Source/xlib/XGGState.m ([XGGState -DPSsetmiterlimit:]): Implement
	to do nothing.

	* Source/x11/GNUmakefile: Remove unsed draw.c, gradient.c, misc.c

2002-03-31  Fred Kiefer <FredKiefer@gmx.de>

	* Source/x11/XGServerWindow.m
	In [window:::] set the initial hints for a window, as
	setWindowHintsForStyle() would otherwise never be called.
	
2002-03-30  Adam Fedor  <fedor@gnu.org>

	* Source/GNUmakefile.preamble: Add graphic includes, -Wall
	* Source/gsc/GNUmakefile.preamble: Likewise.
	* Source/x11/GNUmakefile.preamble: Likewise.
	* Source/xlib/GNUmakefile.preamble: Likewise.

	* Tools/font_cacher.m: Fix include.

2002-03-29  Adam Fedor  <fedor@gnu.org>

	* Source/gsc/GSGState.m (-GSSendBezierPath:): Append path in all
	cases.
	(- GSRectFillList): Implement.
	* Source/x11/XGServerWindow.m: 
	([XGServer -windowbounds:]): Don't get screen bounds.

	* Source/x11/*.c: Fix includes.

2002-03-27  Adam Fedor  <fedor@gnu.org>

	* Source/x11/GNUmakefile: Get headers from right place.
	* Source/xlib/GNUmakefile: Remove invalid header.
	
	* Source/x11/XGServerWindow.m (-window:::): Change method to
	match frontend (including setting of style).

2002-03-27  Adam Fedor  <fedor@gnu.org>

	* Version: Initial version (most code extracted from xgps).

